# P2F7 - 정치인 목록 페이지

**Phase**: Phase 2 - 정치인 목록/상세
**영역**: Frontend
**담당 AI**: fullstack-developer
**상태**: 대기
**진도**: 0%

---

## 📋 작업 개요

정치인 목록을 표시하는 메인 페이지를 개발합니다. 검색, 필터링, 정렬, 페이지네이션 기능을 통합하여 사용자가 원하는 정치인을 쉽게 찾을 수 있도록 합니다.

---

## 🎯 작업 목표

- [ ] 정치인 목록 페이지 레이아웃
- [ ] SearchFilter 컴포넌트 통합
- [ ] SortDropdown 컴포넌트 통합
- [ ] PoliticianCard 그리드 표시
- [ ] Pagination 통합
- [ ] 로딩 상태 처리
- [ ] 빈 상태 UI
- [ ] SEO 최적화

---

## 📐 기술 사양

### Frontend
- Framework: Next.js 14 (App Router)
- Language: TypeScript
- Styling: Tailwind CSS
- Data Fetching: Server Components + Client State

### 파일 구조
```
frontend/
  src/
    app/
      politicians/
        page.tsx
```

---

## 🔗 의존 작업

**선행 작업**: P2B1 (정치인 목록 API Route)
**후속 작업**: P2T1 (정치인 목록 E2E)

---

## ✅ 완료 기준

1. 정치인 목록 페이지 구현
2. 검색/필터링 UI 통합
3. 정렬 기능 통합
4. 페이지네이션 통합
5. 로딩 스켈레톤 UI
6. 빈 상태 (결과 없음) UI
7. SEO 메타 태그
8. 반응형 디자인

---

## 💻 구현 상세

```typescript
// app/politicians/page.tsx
'use client'

import { useState, useEffect } from 'react'
import { useSearchParams } from 'next/navigation'
import { supabase } from '@/lib/supabase'
import SearchFilter from '@/components/politician/SearchFilter'
import SortDropdown from '@/components/politician/SortDropdown'
import PoliticianCard from '@/components/politician/PoliticianCard'
import { PoliticianCardSkeleton } from '@/components/politician/PoliticianCard'
import Pagination from '@/components/ui/Pagination'

export default function PoliticiansPage() {
  const searchParams = useSearchParams()
  const [politicians, setPoliticians] = useState([])
  const [loading, setLoading] = useState(true)
  const [totalCount, setTotalCount] = useState(0)

  const currentPage = Number(searchParams.get('page')) || 1
  const pageSize = 12

  useEffect(() => {
    fetchPoliticians()
  }, [searchParams])

  const fetchPoliticians = async () => {
    setLoading(true)

    const filters = {
      search: searchParams.get('search') || '',
      party: searchParams.get('party')?.split(',').filter(Boolean) || [],
      region: searchParams.get('region')?.split(',').filter(Boolean) || [],
      position: searchParams.get('position')?.split(',').filter(Boolean) || []
    }

    const sort = {
      field: searchParams.get('sort') || 'name',
      order: searchParams.get('order') || 'asc'
    }

    let query = supabase
      .from('politicians')
      .select('*', { count: 'exact' })
      .range((currentPage - 1) * pageSize, currentPage * pageSize - 1)
      .order(sort.field, { ascending: sort.order === 'asc' })

    if (filters.search) {
      query = query.ilike('name', `%${filters.search}%`)
    }

    if (filters.party.length) {
      query = query.in('party', filters.party)
    }

    if (filters.region.length) {
      query = query.in('region', filters.region)
    }

    if (filters.position.length) {
      query = query.in('position', filters.position)
    }

    const { data, error, count } = await query

    if (!error) {
      setPoliticians(data || [])
      setTotalCount(count || 0)
    }

    setLoading(false)
  }

  const totalPages = Math.ceil(totalCount / pageSize)

  return (
    <div className="container mx-auto py-8">
      <h1 className="text-4xl font-bold mb-8">정치인 목록</h1>

      {/* 검색/필터 */}
      <div className="mb-6">
        <SearchFilter onFilterChange={fetchPoliticians} />
      </div>

      {/* 정렬 + 결과 수 */}
      <div className="flex justify-between items-center mb-6">
        <div className="text-sm text-gray-600">
          전체 {totalCount}명
        </div>
        <SortDropdown onSortChange={fetchPoliticians} />
      </div>

      {/* 정치인 카드 그리드 */}
      {loading ? (
        <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
          {Array.from({ length: pageSize }).map((_, i) => (
            <PoliticianCardSkeleton key={i} />
          ))}
        </div>
      ) : politicians.length === 0 ? (
        <div className="text-center py-20">
          <p className="text-2xl text-gray-400 mb-4">검색 결과가 없습니다</p>
          <p className="text-sm text-gray-500">다른 검색 조건을 시도해보세요</p>
        </div>
      ) : (
        <>
          <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6">
            {politicians.map(politician => (
              <PoliticianCard key={politician.id} politician={politician} />
            ))}
          </div>

          {/* 페이지네이션 */}
          <Pagination
            currentPage={currentPage}
            totalPages={totalPages}
            onPageChange={(page) => {}}
            pageSize={pageSize}
            totalItems={totalCount}
          />
        </>
      )}
    </div>
  )
}
```

---

## 📝 테스트 계획

### 단위 테스트
- [ ] 페이지 렌더링 테스트
- [ ] 필터 적용 테스트
- [ ] 정렬 적용 테스트

### 통합 테스트
- [ ] 전체 플로우 E2E 테스트
- [ ] 검색 결과 확인
- [ ] 페이지네이션 동작

---

## 🔒 보안 고려사항

- XSS 방지
- SQL Injection 방지 (백엔드)
- RLS 정책 준수

---

## 📌 참고사항

**작업 완료 일시**: 대기중
**테스트/검토 결과**: 대기
**자동화 방식**: AI-only
**블로커**: 없음
**비고**: -

---

**작성 방법론**: 15DGC-AODM v3.0
**AI-Only 원칙 준수**: ✅
