# P5E2 - Google OAuth 소셜 로그인 설정

**Phase**: Phase 5 - 배포 및 기타
**영역**: Google OAuth Configuration
**담당**: User Manual Task (사용자 수동 작업)
**상태**: 진행 중
**진도**: 0%

---

## 📋 작업 개요

Google OAuth 2.0을 이용한 소셜 로그인을 설정하는 작업입니다. 사용자가 Google 계정으로 PoliticianFinder에 가입 및 로그인할 수 있도록 구성합니다.

---

## 🎯 작업 목표

- [ ] Google Cloud Console에서 OAuth 2.0 클라이언트 ID 생성
- [ ] 리다이렉트 URI 정확히 설정
- [ ] Supabase에 Google 프로바이더 설정
- [ ] Google 로그인 테스트 및 검증

---

## 📐 기술 사양

### 필요한 정보
- Supabase Project URL: `https://ooddlafwdpzgxfefgsrx.supabase.co`
- Supabase Callback URL: `https://ooddlafwdpzgxfefgsrx.supabase.co/auth/v1/callback?provider=google`
- 배포된 앱 URL: `https://politician-finder-web.vercel.app`
- 로컬 테스트 URL: `http://localhost:3000`

---

## 📝 상세 작업 절차

### 1단계: Google Cloud Console 접속

1. https://console.cloud.google.com 접속
2. 상단에서 "Politician-Finder" 프로젝트 선택
3. 왼쪽 메뉴에서 **API 및 서비스** → **사용자 인증 정보** 클릭

### 2단계: OAuth 2.0 클라이언트 ID 생성

1. **"+ 사용자 인증 정보 만들기"** 클릭
2. **"OAuth 2.0 클라이언트 ID"** 선택
3. **애플리케이션 유형: "웹 애플리케이션"** 선택
4. 클라이언트 이름: `Politician Finder OAuth` (또는 원하는 이름)
5. **다음 버튼 클릭**

### 3단계: 승인된 리다이렉트 URI 설정

**매우 중요: 정확하게 입력해야 합니다**

1. **"승인된 리다이렉트 URI"** 섹션 찾기
2. **"+ URI 추가"** 버튼 클릭
3. 다음 URI를 **정확하게** 입력:
   ```
   https://ooddlafwdpzgxfefgsrx.supabase.co/auth/v1/callback?provider=google
   ```
   - 마지막의 `?provider=google` 부분을 빠뜨리지 마세요
4. **저장** 클릭

### 4단계: 승인된 JavaScript 원본 설정

1. **"승인된 JavaScript 원본"** 섹션 찾기
2. **"+ URI 추가"** 버튼 클릭
3. 다음을 추가 (로컬 테스트용):
   ```
   http://localhost:3000
   ```
4. **"+ URI 추가"** 버튼 다시 클릭
5. 다음을 추가 (배포 환경용):
   ```
   https://politician-finder-web.vercel.app
   ```
6. **저장** 클릭

### 5단계: 클라이언트 ID와 비밀번호 복사

1. 생성 완료 후 클라이언트 상세 페이지 확인
2. **Client ID** 복사 (숫자로 시작하는 긴 문자열)
3. **Client Secret** 복사

### 6단계: Supabase 설정

1. Supabase 대시보드 접속: https://supabase.com/dashboard
2. "Politician-Finder" 프로젝트 선택
3. **Authentication** → **Providers** → **Google** 클릭
4. **"Enable Sign-in with Google"** 토글 활성화
5. **Client ID** 필드에 Google에서 복사한 Client ID 붙여넣기
6. **Client Secret** 필드에 Google에서 복사한 Client Secret 붙여넣기
7. **저장** 클릭

---

## ✅ 검증 방법

### 로컬 환경에서 테스트

1. 로컬 개발 서버 실행: `npm run dev`
2. `http://localhost:3000/login` 접속
3. "Google로 로그인" 버튼 클릭
4. Google 로그인 창이 정상 표시되는지 확인
5. Google 계정으로 로그인 시도
6. 성공 메시지 또는 로그인 완료 확인

### 배포 환경에서 테스트

1. https://politician-finder-web.vercel.app/login 접속
2. "Google로 로그인" 버튼 클릭
3. Google 로그인 창이 정상 표시되는지 확인
4. Google 계정으로 로그인 시도
5. 성공 시 대시보드로 이동 확인

### 문제 발생 시

**"400 오류: redirect_uri_mismatch" 오류가 나면:**
- Google Cloud Console에서 리다이렉트 URI가 정확하게 입력되었는지 확인
- 특히 마지막의 `?provider=google` 부분 확인
- Google Cloud Console 캐시 제거: 5분 기다렸다가 다시 시도

---

## 📌 참고사항

- Supabase Callback URL은 절대 변경하면 안 됩니다
- 리다이렉트 URI에서 `?provider=google` 부분을 빠뜨리면 안 됩니다
- Client Secret은 노출되면 안 되므로 공개하지 마세요
- Google Cloud Console 설정 변경 후 약 5분 후부터 적용됩니다

---

## 📊 진행 상태 추적

| 단계 | 상태 | 완료 여부 |
|------|------|---------|
| Google Cloud Console 접속 | ⏳ 대기 | [ ] |
| OAuth 2.0 클라이언트 생성 | ⏳ 대기 | [ ] |
| 리다이렉트 URI 설정 | ⏳ 대기 | [ ] |
| JavaScript 원본 설정 | ⏳ 대기 | [ ] |
| Client ID/Secret 복사 | ⏳ 대기 | [ ] |
| Supabase 설정 완료 | ⏳ 대기 | [ ] |
| 로컬 테스트 | ⏳ 대기 | [ ] |
| 배포 환경 테스트 | ⏳ 대기 | [ ] |

---

**마지막 업데이트**: 2025-10-20
**작업자**: User Manual (사용자 수동 작업)
**상태 업데이트 예정**: 작업 완료 후
