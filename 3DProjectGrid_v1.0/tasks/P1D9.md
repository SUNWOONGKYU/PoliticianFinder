# P1D9 - notifications 테이블

## 작업 ID
P1D9

## 담당 영역
Database

## 작업 개요
사용자 알림을 관리하는 notifications 테이블을 생성합니다.

## 상세 설명
사용자에게 전송되는 알림 정보를 저장하는 테이블입니다. 평가 완료, 댓글 알림, 시스템 공지 등을 관리합니다.

## 기술 스택
- Supabase (PostgreSQL)
- SQL DDL

## 구현 사항
1. notifications 테이블 생성
2. 필수 컬럼 정의
3. 알림 타입 및 상태 관리
4. 인덱스 최적화

## 테이블 스키마
```sql
CREATE TABLE notifications (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  type VARCHAR(50) NOT NULL, -- 'rating', 'comment', 'system' 등
  title VARCHAR(200) NOT NULL,
  message TEXT NOT NULL,
  link TEXT,
  is_read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  read_at TIMESTAMP WITH TIME ZONE
);

CREATE INDEX idx_notifications_user ON notifications(user_id);
CREATE INDEX idx_notifications_unread ON notifications(user_id, is_read);
```

## 성공 기준
- [ ] notifications 테이블이 정상적으로 생성됨
- [ ] 외래 키가 올바르게 설정됨
- [ ] 인덱스가 최적화됨
- [ ] 읽음/안읽음 상태 관리 작동
- [ ] 테스트 알림 생성 성공

## 의존 작업
- P1D1 (profiles 테이블)

## 예상 소요 시간
30분

## 참고 사항
- is_read 인덱스로 미읽음 알림 조회 최적화
- 알림 타입은 확장 가능하도록 설계
