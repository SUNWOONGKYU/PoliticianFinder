# P2T3 - ìƒì„¸ í˜ì´ì§€ E2E

**Phase**: Phase 2 - ì •ì¹˜ì¸ ëª©ë¡/ìƒì„¸
**ì˜ì—­**: Test (E2E)
**ë‹´ë‹¹ AI**: devops-troubleshooter
**ìƒíƒœ**: ëŒ€ê¸°
**ì§„ë„**: 0%

---

## ğŸ“‹ ì‘ì—… ê°œìš”

ì •ì¹˜ì¸ ìƒì„¸ í˜ì´ì§€ì˜ End-to-End í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. í”„ë¡œí•„ ì •ë³´, AI ì ìˆ˜, ì‹œë¯¼ í‰ê°€ ë“±ì˜ í‘œì‹œ ë° ìƒí˜¸ì‘ìš©ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

- [ ] ìƒì„¸ í˜ì´ì§€ ë Œë”ë§ í…ŒìŠ¤íŠ¸
- [ ] í”„ë¡œí•„ ì •ë³´ í‘œì‹œ í…ŒìŠ¤íŠ¸
- [ ] AI ì ìˆ˜ í‘œì‹œ í…ŒìŠ¤íŠ¸
- [ ] í‰ê°€ í†µê³„ í‘œì‹œ í…ŒìŠ¤íŠ¸
- [ ] í‰ê°€ ëª©ë¡ í‘œì‹œ í…ŒìŠ¤íŠ¸
- [ ] SEO ë©”íƒ€ë°ì´í„° í…ŒìŠ¤íŠ¸
- [ ] 404 ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ê³µìœ  ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

---

## ğŸ“ ê¸°ìˆ  ì‚¬ì–‘

### Testing
- Framework: Playwright
- Language: TypeScript

---

## ğŸ”— ì˜ì¡´ ì‘ì—…

**ì„ í–‰ ì‘ì—…**: P2F6 (ì •ì¹˜ì¸ ìƒì„¸ í˜ì´ì§€)
**í›„ì† ì‘ì—…**: P2V2 (CI/CD íŒŒì´í”„ë¼ì¸)

---

## âœ… ì™„ë£Œ ê¸°ì¤€

1. 8ê°œ ì´ìƒì˜ E2E í…ŒìŠ¤íŠ¸ ì‘ì„±
2. ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼
3. SEO í…ŒìŠ¤íŠ¸ ì™„ë£Œ
4. ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ

---

## ğŸ’» êµ¬í˜„ ìƒì„¸

```typescript
// tests/e2e/politician-detail.spec.ts
import { test, expect } from '@playwright/test'

test.describe('ì •ì¹˜ì¸ ìƒì„¸ í˜ì´ì§€', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/politicians/1')
  })

  test('í”„ë¡œí•„ ì •ë³´ í‘œì‹œ', async ({ page }) => {
    // ì´ë¦„
    await expect(page.locator('h1[data-testid="politician-name"]')).toBeVisible()

    // í”„ë¡œí•„ ì´ë¯¸ì§€
    await expect(page.locator('[data-testid="profile-image"]')).toBeVisible()

    // ê¸°ë³¸ ì •ë³´
    await expect(page.locator('[data-testid="politician-party"]')).toBeVisible()
    await expect(page.locator('[data-testid="politician-region"]')).toBeVisible()
    await expect(page.locator('[data-testid="politician-position"]')).toBeVisible()

    // ì•½ë ¥
    await expect(page.locator('[data-testid="politician-biography"]')).toBeVisible()

    // ê³µì‹ ì›¹ì‚¬ì´íŠ¸
    const website = page.locator('[data-testid="official-website"]')
    if (await website.isVisible()) {
      await expect(website).toHaveAttribute('href', /https?:\/\//)
      await expect(website).toHaveAttribute('target', '_blank')
    }
  })

  test('AI ì ìˆ˜ í‘œì‹œ', async ({ page }) => {
    // AI ì ìˆ˜ ì„¹ì…˜
    await expect(page.locator('[data-testid="ai-scores-section"]')).toBeVisible()

    // Claude ì ìˆ˜
    const claudeScore = page.locator('[data-testid="ai-score-claude"]')
    await expect(claudeScore).toBeVisible()

    const score = await claudeScore.textContent()
    expect(parseFloat(score!)).toBeGreaterThanOrEqual(0)
    expect(parseFloat(score!)).toBeLessThanOrEqual(100)
  })

  test('í‰ê°€ í†µê³„ í‘œì‹œ', async ({ page }) => {
    // í‰ê·  í‰ì 
    const avgRating = page.locator('[data-testid="avg-rating"]')
    await expect(avgRating).toBeVisible()

    // í‰ê°€ ê°œìˆ˜
    const totalRatings = page.locator('[data-testid="total-ratings"]')
    await expect(totalRatings).toBeVisible()

    // í‰ê°€ ë¶„í¬ ì°¨íŠ¸
    await expect(page.locator('[data-testid="rating-distribution"]')).toBeVisible()

    // ê° ë³„ì ë³„ ê°œìˆ˜
    for (let i = 1; i <= 5; i++) {
      await expect(page.locator(`[data-testid="rating-dist-${i}"]`)).toBeVisible()
    }
  })

  test('SEO ë©”íƒ€ë°ì´í„°', async ({ page }) => {
    // í˜ì´ì§€ íƒ€ì´í‹€
    const title = await page.title()
    expect(title).toContain('í™ê¸¸ë™') // ì •ì¹˜ì¸ ì´ë¦„ í¬í•¨

    // Open Graph ë©”íƒ€ íƒœê·¸
    const ogTitle = await page.locator('meta[property="og:title"]').getAttribute('content')
    expect(ogTitle).toBeTruthy()

    const ogDescription = await page
      .locator('meta[property="og:description"]')
      .getAttribute('content')
    expect(ogDescription).toBeTruthy()

    const ogImage = await page.locator('meta[property="og:image"]').getAttribute('content')
    expect(ogImage).toMatch(/https?:\/\//)
  })

  test('404 ì—ëŸ¬ ì²˜ë¦¬', async ({ page }) => {
    // ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì •ì¹˜ì¸ ID
    const response = await page.goto('/politicians/999999')

    // 404 ì‘ë‹µ ë˜ëŠ” ì—ëŸ¬ í˜ì´ì§€
    if (response) {
      expect(response.status()).toBe(404)
    }

    // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
    await expect(page.locator('[data-testid="not-found"]')).toBeVisible()
    await expect(page.locator('[data-testid="not-found"]')).toContainText(
      'ì •ì¹˜ì¸ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'
    )

    // í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼
    await expect(page.locator('[data-testid="back-to-home"]')).toBeVisible()
  })

  test('ê³µìœ  ê¸°ëŠ¥', async ({ page }) => {
    // ê³µìœ  ë²„íŠ¼ í´ë¦­
    await page.locator('[data-testid="share-button"]').click()

    // ê³µìœ  ëª¨ë‹¬/ë©”ë‰´ í‘œì‹œ
    await expect(page.locator('[data-testid="share-menu"]')).toBeVisible()

    // URL ë³µì‚¬ ë²„íŠ¼
    await page.locator('[data-testid="copy-url"]').click()

    // ë³µì‚¬ ì™„ë£Œ ë©”ì‹œì§€
    await expect(page.locator('[data-testid="toast-success"]')).toContainText('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤')
  })

  test('ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼', async ({ page }) => {
    // ëª©ë¡ í˜ì´ì§€ì—ì„œ ì§„ì…
    await page.goto('/politicians')
    await page.locator('[data-testid="politician-card"]').first().click()

    // ë’¤ë¡œ ê°€ê¸° ë²„íŠ¼ í´ë¦­
    await page.locator('[data-testid="back-button"]').click()

    // ëª©ë¡ í˜ì´ì§€ë¡œ ë³µê·€
    await expect(page).toHaveURL('/politicians')
  })
})
```

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
npx playwright test politician-detail.spec.ts
```

---

## ğŸ“Œ ì°¸ê³ ì‚¬í•­

**ì‘ì—… ì™„ë£Œ ì¼ì‹œ**: ëŒ€ê¸°ì¤‘
**í…ŒìŠ¤íŠ¸/ê²€í†  ê²°ê³¼**: ëŒ€ê¸°
**ìë™í™” ë°©ì‹**: AI-only
**ë¸”ë¡œì»¤**: ì—†ìŒ
**ë¹„ê³ **: SEO ë©”íƒ€ë°ì´í„° í…ŒìŠ¤íŠ¸ë¡œ ê²€ìƒ‰ ì—”ì§„ ìµœì í™” í™•ì¸

---

**ì‘ì„± ë°©ë²•ë¡ **: 15DGC-AODM v3.0
**AI-Only ì›ì¹™ ì¤€ìˆ˜**: âœ…
