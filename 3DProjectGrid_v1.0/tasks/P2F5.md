# P2F5 - 정렬 드롭다운

**Phase**: Phase 2 - 정치인 목록/상세
**영역**: Frontend
**담당 AI**: fullstack-developer
**상태**: 대기
**진도**: 0%

---

## 📋 작업 개요

정치인 목록 페이지에서 정렬 기능을 제공하는 드롭다운 컴포넌트를 구현합니다. 사용자가 이름순, 평점순, 최신순 등 다양한 기준으로 정치인 목록을 정렬할 수 있습니다.

---

## 🎯 작업 목표

- [ ] SortDropdown 컴포넌트 생성
- [ ] 정렬 옵션 드롭다운
- [ ] 정렬 방향 (오름차순/내림차순) 토글
- [ ] 선택된 정렬 옵션 표시
- [ ] URL 쿼리 파라미터 동기화
- [ ] 아이콘을 통한 직관적 UI

---

## 📐 기술 사양

### Frontend
- Framework: Next.js 14 (App Router)
- Language: TypeScript
- Styling: Tailwind CSS
- UI Components: shadcn/ui (Select, Button)

### 파일 구조
```
frontend/
  src/
    components/
      politician/
        SortDropdown.tsx
```

### SortDropdown Props 인터페이스
```typescript
interface SortDropdownProps {
  onSortChange: (sort: SortOption) => void
  initialSort?: SortOption
}

interface SortOption {
  field: 'name' | 'avg_rating' | 'created_at' | 'total_ratings'
  order: 'asc' | 'desc'
}
```

---

## 🔗 의존 작업

**선행 작업**: P2B1 (정치인 목록 API Route)
**후속 작업**: P2F7 (정치인 목록 페이지)

---

## ✅ 완료 기준

1. SortDropdown 컴포넌트 구현
2. 정렬 필드 선택 드롭다운
3. 오름차순/내림차순 토글 버튼
4. 선택된 정렬 표시
5. URL 쿼리 파라미터 동기화
6. 아이콘 표시 (↑ ↓)
7. TypeScript 타입 안정성 확보

---

## 💻 구현 상세

```typescript
// components/politician/SortDropdown.tsx
'use client'

import { useState, useEffect } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Button } from '@/components/ui/button'
import { ArrowUpDown, ArrowUp, ArrowDown } from 'lucide-react'

interface SortDropdownProps {
  onSortChange: (sort: SortOption) => void
}

interface SortOption {
  field: 'name' | 'avg_rating' | 'created_at' | 'total_ratings'
  order: 'asc' | 'desc'
}

const SORT_OPTIONS = [
  { value: 'name', label: '이름순' },
  { value: 'avg_rating', label: '평점순' },
  { value: 'created_at', label: '최신순' },
  { value: 'total_ratings', label: '평가수순' }
]

export default function SortDropdown({ onSortChange }: SortDropdownProps) {
  const router = useRouter()
  const searchParams = useSearchParams()

  const [sortField, setSortField] = useState<string>(
    searchParams.get('sort') || 'name'
  )
  const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>(
    (searchParams.get('order') as 'asc' | 'desc') || 'asc'
  )

  useEffect(() => {
    const sort: SortOption = {
      field: sortField as SortOption['field'],
      order: sortOrder
    }

    onSortChange(sort)

    // URL 쿼리 파라미터 업데이트
    const params = new URLSearchParams(searchParams.toString())
    params.set('sort', sortField)
    params.set('order', sortOrder)
    router.push(`?${params.toString()}`, { scroll: false })
  }, [sortField, sortOrder])

  const toggleOrder = () => {
    setSortOrder(prev => prev === 'asc' ? 'desc' : 'asc')
  }

  return (
    <div className="flex items-center gap-2">
      <span className="text-sm text-gray-600">정렬:</span>

      <Select value={sortField} onValueChange={setSortField}>
        <SelectTrigger className="w-[140px]">
          <SelectValue />
        </SelectTrigger>
        <SelectContent>
          {SORT_OPTIONS.map(option => (
            <SelectItem key={option.value} value={option.value}>
              {option.label}
            </SelectItem>
          ))}
        </SelectContent>
      </Select>

      <Button
        variant="outline"
        size="icon"
        onClick={toggleOrder}
        title={sortOrder === 'asc' ? '오름차순' : '내림차순'}
      >
        {sortOrder === 'asc' ? (
          <ArrowUp className="w-4 h-4" />
        ) : (
          <ArrowDown className="w-4 h-4" />
        )}
      </Button>
    </div>
  )
}
```

---

## 📝 테스트 계획

### 단위 테스트
- [ ] 정렬 필드 변경 테스트
- [ ] 정렬 방향 토글 테스트
- [ ] URL 업데이트 테스트

### 통합 테스트
- [ ] 정렬 변경 시 목록 갱신 테스트
- [ ] 초기 URL 파라미터 읽기 테스트

---

## 🔒 보안 고려사항

- 정렬 필드 화이트리스트 검증
- SQL Injection 방지 (백엔드)

---

## 📌 참고사항

**작업 완료 일시**: 대기중
**테스트/검토 결과**: 대기
**자동화 방식**: AI-only
**블로커**: 없음
**비고**: -

---

**작성 방법론**: 15DGC-AODM v3.0
**AI-Only 원칙 준수**: ✅
