# P2F3 - ê²€ìƒ‰ í•„í„°ë§ UI

**Phase**: Phase 2 - ì •ì¹˜ì¸ ëª©ë¡/ìƒì„¸
**ì˜ì—­**: Frontend
**ë‹´ë‹¹ AI**: fullstack-developer
**ìƒíƒœ**: ëŒ€ê¸°
**ì§„ë„**: 0%

---

## ğŸ“‹ ì‘ì—… ê°œìš”

ì •ì¹˜ì¸ ëª©ë¡ í˜ì´ì§€ì—ì„œ ì‚¬ìš©í•  ê²€ìƒ‰ ë° í•„í„°ë§ UI ì»´í¬ë„ŒíŠ¸ë¥¼ ê°œë°œí•©ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ì •ë‹¹, ì§€ì—­, ì§ê¸‰ë³„ë¡œ ì •ì¹˜ì¸ì„ í•„í„°ë§í•˜ê³ , ì´ë¦„ìœ¼ë¡œ ê²€ìƒ‰í•  ìˆ˜ ìˆëŠ” ì¸í„°í˜ì´ìŠ¤ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

- [ ] ê²€ìƒ‰ ì…ë ¥ì°½ ì»´í¬ë„ŒíŠ¸ ìƒì„±
- [ ] ì •ë‹¹ í•„í„° ë“œë¡­ë‹¤ìš´ êµ¬í˜„
- [ ] ì§€ì—­ í•„í„° ë“œë¡­ë‹¤ìš´ êµ¬í˜„
- [ ] ì§ê¸‰ í•„í„° ë“œë¡­ë‹¤ìš´ êµ¬í˜„
- [ ] í•„í„° ì´ˆê¸°í™” ë²„íŠ¼
- [ ] ì‹¤ì‹œê°„ ê²€ìƒ‰ (ë””ë°”ìš´ì‹±)
- [ ] ì„ íƒëœ í•„í„° íƒœê·¸ í‘œì‹œ
- [ ] URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ë™ê¸°í™”

---

## ğŸ“ ê¸°ìˆ  ì‚¬ì–‘

### Frontend
- Framework: Next.js 14 (App Router)
- Language: TypeScript
- Styling: Tailwind CSS
- UI Components: shadcn/ui (Select, Input, Button, Badge)
- State Management: React useState + URL Search Params

### íŒŒì¼ êµ¬ì¡°
```
frontend/
  src/
    components/
      politician/
        SearchFilter.tsx
        FilterBadge.tsx
    hooks/
      useSearchFilter.ts
```

### SearchFilter Props ì¸í„°í˜ì´ìŠ¤
```typescript
interface SearchFilterProps {
  onFilterChange: (filters: FilterState) => void
  initialFilters?: FilterState
}

interface FilterState {
  search: string
  party: string[]
  region: string[]
  position: string[]
}
```

---

## ğŸ”— ì˜ì¡´ ì‘ì—…

**ì„ í–‰ ì‘ì—…**: P2B4 (ê²€ìƒ‰/í•„í„° API)
**í›„ì† ì‘ì—…**: P2F7 (ì •ì¹˜ì¸ ëª©ë¡ í˜ì´ì§€)

---

## âœ… ì™„ë£Œ ê¸°ì¤€

1. ê²€ìƒ‰ ì…ë ¥ì°½ êµ¬í˜„ (500ms ë””ë°”ìš´ì‹±)
2. ì •ë‹¹ í•„í„° ë‹¤ì¤‘ ì„ íƒ ë“œë¡­ë‹¤ìš´
3. ì§€ì—­ í•„í„° ë‹¤ì¤‘ ì„ íƒ ë“œë¡­ë‹¤ìš´
4. ì§ê¸‰ í•„í„° ë‹¤ì¤‘ ì„ íƒ ë“œë¡­ë‹¤ìš´
5. ì„ íƒëœ í•„í„° ë±ƒì§€ë¡œ í‘œì‹œ
6. í•„í„° ì´ˆê¸°í™” ë²„íŠ¼ ë™ì‘
7. URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— í•„í„° ìƒíƒœ ë°˜ì˜
8. TypeScript íƒ€ì… ì•ˆì •ì„± í™•ë³´

---

## ğŸ’» êµ¬í˜„ ìƒì„¸

### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```typescript
// components/politician/SearchFilter.tsx
'use client'

import { useState, useEffect } from 'react'
import { useRouter, useSearchParams } from 'next/navigation'
import { Input } from '@/components/ui/input'
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select'
import { Button } from '@/components/ui/button'
import { Badge } from '@/components/ui/badge'
import { Search, X } from 'lucide-react'
import { useDebounce } from '@/hooks/useDebounce'

interface SearchFilterProps {
  onFilterChange: (filters: FilterState) => void
}

interface FilterState {
  search: string
  party: string[]
  region: string[]
  position: string[]
}

const PARTIES = ['ë”ë¶ˆì–´ë¯¼ì£¼ë‹¹', 'êµ­ë¯¼ì˜í˜', 'ì •ì˜ë‹¹', 'ë¬´ì†Œì†']
const REGIONS = ['ì„œìš¸', 'ê²½ê¸°', 'ì¸ì²œ', 'ë¶€ì‚°', 'ëŒ€êµ¬', 'ê´‘ì£¼', 'ëŒ€ì „', 'ìš¸ì‚°', 'ì„¸ì¢…', 'ê°•ì›', 'ì¶©ë¶', 'ì¶©ë‚¨', 'ì „ë¶', 'ì „ë‚¨', 'ê²½ë¶', 'ê²½ë‚¨', 'ì œì£¼']
const POSITIONS = ['êµ­íšŒì˜ì›', 'ì‹œì¥', 'ë„ì§€ì‚¬', 'êµ¬ì²­ì¥', 'ì‹œì˜ì›']

export default function SearchFilter({ onFilterChange }: SearchFilterProps) {
  const router = useRouter()
  const searchParams = useSearchParams()

  const [search, setSearch] = useState(searchParams.get('search') || '')
  const [selectedParty, setSelectedParty] = useState<string[]>(
    searchParams.get('party')?.split(',').filter(Boolean) || []
  )
  const [selectedRegion, setSelectedRegion] = useState<string[]>(
    searchParams.get('region')?.split(',').filter(Boolean) || []
  )
  const [selectedPosition, setSelectedPosition] = useState<string[]>(
    searchParams.get('position')?.split(',').filter(Boolean) || []
  )

  const debouncedSearch = useDebounce(search, 500)

  useEffect(() => {
    const filters: FilterState = {
      search: debouncedSearch,
      party: selectedParty,
      region: selectedRegion,
      position: selectedPosition
    }

    onFilterChange(filters)

    // URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì—…ë°ì´íŠ¸
    const params = new URLSearchParams()
    if (debouncedSearch) params.set('search', debouncedSearch)
    if (selectedParty.length) params.set('party', selectedParty.join(','))
    if (selectedRegion.length) params.set('region', selectedRegion.join(','))
    if (selectedPosition.length) params.set('position', selectedPosition.join(','))

    router.push(`?${params.toString()}`, { scroll: false })
  }, [debouncedSearch, selectedParty, selectedRegion, selectedPosition])

  const handleReset = () => {
    setSearch('')
    setSelectedParty([])
    setSelectedRegion([])
    setSelectedPosition([])
    router.push('/', { scroll: false })
  }

  const removeFilter = (type: 'party' | 'region' | 'position', value: string) => {
    if (type === 'party') {
      setSelectedParty(prev => prev.filter(p => p !== value))
    } else if (type === 'region') {
      setSelectedRegion(prev => prev.filter(r => r !== value))
    } else {
      setSelectedPosition(prev => prev.filter(p => p !== value))
    }
  }

  const hasFilters = search || selectedParty.length || selectedRegion.length || selectedPosition.length

  return (
    <div className="space-y-4">
      <div className="flex gap-4 flex-wrap">
        {/* ê²€ìƒ‰ ì…ë ¥ì°½ */}
        <div className="flex-1 min-w-[250px]">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400" />
            <Input
              placeholder="ì •ì¹˜ì¸ ì´ë¦„ ê²€ìƒ‰..."
              value={search}
              onChange={(e) => setSearch(e.target.value)}
              className="pl-10"
            />
          </div>
        </div>

        {/* ì •ë‹¹ í•„í„° */}
        <Select
          value={selectedParty[0] || ''}
          onValueChange={(value) => {
            if (!selectedParty.includes(value)) {
              setSelectedParty([...selectedParty, value])
            }
          }}
        >
          <SelectTrigger className="w-[150px]">
            <SelectValue placeholder="ì •ë‹¹ ì„ íƒ" />
          </SelectTrigger>
          <SelectContent>
            {PARTIES.map(party => (
              <SelectItem key={party} value={party}>{party}</SelectItem>
            ))}
          </SelectContent>
        </Select>

        {/* ì§€ì—­ í•„í„° */}
        <Select
          value={selectedRegion[0] || ''}
          onValueChange={(value) => {
            if (!selectedRegion.includes(value)) {
              setSelectedRegion([...selectedRegion, value])
            }
          }}
        >
          <SelectTrigger className="w-[150px]">
            <SelectValue placeholder="ì§€ì—­ ì„ íƒ" />
          </SelectTrigger>
          <SelectContent>
            {REGIONS.map(region => (
              <SelectItem key={region} value={region}>{region}</SelectItem>
            ))}
          </SelectContent>
        </Select>

        {/* ì§ê¸‰ í•„í„° */}
        <Select
          value={selectedPosition[0] || ''}
          onValueChange={(value) => {
            if (!selectedPosition.includes(value)) {
              setSelectedPosition([...selectedPosition, value])
            }
          }}
        >
          <SelectTrigger className="w-[150px]">
            <SelectValue placeholder="ì§ê¸‰ ì„ íƒ" />
          </SelectTrigger>
          <SelectContent>
            {POSITIONS.map(position => (
              <SelectItem key={position} value={position}>{position}</SelectItem>
            ))}
          </SelectContent>
        </Select>

        {/* ì´ˆê¸°í™” ë²„íŠ¼ */}
        {hasFilters && (
          <Button variant="outline" onClick={handleReset}>
            <X className="w-4 h-4 mr-2" />
            ì´ˆê¸°í™”
          </Button>
        )}
      </div>

      {/* ì„ íƒëœ í•„í„° ë±ƒì§€ */}
      {hasFilters && (
        <div className="flex gap-2 flex-wrap">
          {selectedParty.map(party => (
            <Badge key={party} variant="secondary">
              {party}
              <button
                onClick={() => removeFilter('party', party)}
                className="ml-2 hover:text-red-600"
              >
                <X className="w-3 h-3" />
              </button>
            </Badge>
          ))}
          {selectedRegion.map(region => (
            <Badge key={region} variant="secondary">
              {region}
              <button
                onClick={() => removeFilter('region', region)}
                className="ml-2 hover:text-red-600"
              >
                <X className="w-3 h-3" />
              </button>
            </Badge>
          ))}
          {selectedPosition.map(position => (
            <Badge key={position} variant="secondary">
              {position}
              <button
                onClick={() => removeFilter('position', position)}
                className="ml-2 hover:text-red-600"
              >
                <X className="w-3 h-3" />
              </button>
            </Badge>
          ))}
        </div>
      )}
    </div>
  )
}
```

### useDebounce Hook

```typescript
// hooks/useDebounce.ts
import { useState, useEffect } from 'react'

export function useDebounce<T>(value: T, delay: number): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value)

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value)
    }, delay)

    return () => {
      clearTimeout(handler)
    }
  }, [value, delay])

  return debouncedValue
}
```

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] ê²€ìƒ‰ ì…ë ¥ ë””ë°”ìš´ì‹± í…ŒìŠ¤íŠ¸
- [ ] í•„í„° ì„ íƒ/í•´ì œ í…ŒìŠ¤íŠ¸
- [ ] í•„í„° ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
- [ ] URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ë™ê¸°í™” í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- [ ] í•„í„° ë³€ê²½ ì‹œ ëª©ë¡ ê°±ì‹  í…ŒìŠ¤íŠ¸
- [ ] ë‹¤ì¤‘ í•„í„° ì¡°í•© í…ŒìŠ¤íŠ¸
- [ ] ë¸Œë¼ìš°ì € ë’¤ë¡œê°€ê¸° ë™ì‘ í…ŒìŠ¤íŠ¸

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- ì…ë ¥ ê°’ XSS ë°©ì§€ (React ìë™ ì´ìŠ¤ì¼€ì´í”„)
- URL íŒŒë¼ë¯¸í„° ì¸ì½”ë”© ì²˜ë¦¬
- SQL Injection ë°©ì§€ (ë°±ì—”ë“œ ì²˜ë¦¬)

---

## ğŸ“Œ ì°¸ê³ ì‚¬í•­

**ì‘ì—… ì™„ë£Œ ì¼ì‹œ**: ëŒ€ê¸°ì¤‘
**í…ŒìŠ¤íŠ¸/ê²€í†  ê²°ê³¼**: ëŒ€ê¸°
**ìë™í™” ë°©ì‹**: AI-only
**ë¸”ë¡œì»¤**: ì—†ìŒ
**ë¹„ê³ **: -

---

**ì‘ì„± ë°©ë²•ë¡ **: 15DGC-AODM v3.0
**AI-Only ì›ì¹™ ì¤€ìˆ˜**: âœ…
