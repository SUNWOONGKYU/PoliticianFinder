# P1D3 - ratings í…Œì´ë¸”

**Phase**: Phase 1 - Supabase ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œ
**ì˜ì—­**: Database (Supabase)
**ë‹´ë‹¹ AI**: fullstack-developer
**ìƒíƒœ**: ì™„ë£Œ (2025-10-16 14:30)
**ì§„ë„**: 100%

---

## ğŸ“‹ ì‘ì—… ê°œìš”

ì‚¬ìš©ìê°€ ì •ì¹˜ì¸ì—ê²Œ ë¶€ì—¬í•œ í‰ê°€ ì ìˆ˜ë¥¼ ì €ì¥í•˜ëŠ” ratings í…Œì´ë¸”ì„ ìƒì„±í•©ë‹ˆë‹¤. 10ê°œ ë¶„ì•¼ë³„ ì ìˆ˜ì™€ ì „ì²´ í‰ê·  ì ìˆ˜ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

- [x] ratings í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ ì •ì˜
- [x] FK ê´€ê³„ ì„¤ì • (politicians, profiles)
- [x] í‰ê°€ ì ìˆ˜ ì»¬ëŸ¼ ì •ì˜
- [x] ì¸ë±ìŠ¤ ë° ì œì•½ì¡°ê±´ ì„¤ì •

---

## ğŸ“ ê¸°ìˆ  ì‚¬ì–‘

### Database
- DBMS: PostgreSQL (Supabase)

### í…Œì´ë¸” êµ¬ì¡°
```sql
CREATE TABLE ratings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  politician_id UUID REFERENCES politicians(id) ON DELETE CASCADE,
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  integrity_score INT CHECK (integrity_score BETWEEN 0 AND 100),
  competence_score INT CHECK (competence_score BETWEEN 0 AND 100),
  communication_score INT CHECK (communication_score BETWEEN 0 AND 100),
  leadership_score INT CHECK (leadership_score BETWEEN 0 AND 100),
  accountability_score INT CHECK (accountability_score BETWEEN 0 AND 100),
  transparency_score INT CHECK (transparency_score BETWEEN 0 AND 100),
  responsiveness_score INT CHECK (responsiveness_score BETWEEN 0 AND 100),
  vision_score INT CHECK (vision_score BETWEEN 0 AND 100),
  public_interest_score INT CHECK (public_interest_score BETWEEN 0 AND 100),
  ethics_score INT CHECK (ethics_score BETWEEN 0 AND 100),
  average_score NUMERIC(5,2),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(politician_id, user_id)
);
```

### ì¸ë±ìŠ¤
```sql
CREATE INDEX idx_ratings_politician ON ratings(politician_id);
CREATE INDEX idx_ratings_user ON ratings(user_id);
CREATE INDEX idx_ratings_average ON ratings(average_score DESC);
```

---

## ğŸ”— ì˜ì¡´ ì‘ì—…

**ì„ í–‰ ì‘ì—…**: P1D2 (politicians í…Œì´ë¸”)
**í›„ì† ì‘ì—…**: P1E2 (ratings RLS)

---

## âœ… ì™„ë£Œ ê¸°ì¤€

1. ratings í…Œì´ë¸” ìƒì„±ë¨
2. FK ê´€ê³„ ì •ìƒ ë™ì‘
3. CHECK ì œì•½ì¡°ê±´ ë™ì‘ í™•ì¸
4. UNIQUE ì œì•½ì¡°ê±´ìœ¼ë¡œ ì¤‘ë³µ í‰ê°€ ë°©ì§€

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ê³„íš

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [x] í…Œì´ë¸” ìƒì„± í™•ì¸
- [x] FK CASCADE ë™ì‘ í™•ì¸
- [x] CHECK ì œì•½ì¡°ê±´ í…ŒìŠ¤íŠ¸

### í†µí•© í…ŒìŠ¤íŠ¸
- [x] í‰ê°€ ë“±ë¡/ìˆ˜ì • ì‹œë‚˜ë¦¬ì˜¤
- [x] ì¤‘ë³µ í‰ê°€ ë°©ì§€ í…ŒìŠ¤íŠ¸
- [x] í‰ê·  ì ìˆ˜ ê³„ì‚° ê²€ì¦

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- RLSë¡œ ë³¸ì¸ í‰ê°€ë§Œ ìˆ˜ì • ê°€ëŠ¥
- ë‹¤ë¥¸ ì‚¬ìš©ì í‰ê°€ëŠ” ì¡°íšŒë§Œ ê°€ëŠ¥
- í‰ê°€ ì¡°ì‘ ë°©ì§€

---

## ğŸ“Œ ì°¸ê³ ì‚¬í•­

**ì‘ì—… ì™„ë£Œ ì¼ì‹œ**: 2025-10-16 14:30
**í…ŒìŠ¤íŠ¸/ê²€í†  ê²°ê³¼**: í†µê³¼
**ìë™í™” ë°©ì‹**: AI-only
**ë¸”ë¡œì»¤**: ì—†ìŒ
**ë¹„ê³ **: -

---

**ì‘ì„± ë°©ë²•ë¡ **: 15DGC-AODM v3.0
**AI-Only ì›ì¹™ ì¤€ìˆ˜**: âœ…
