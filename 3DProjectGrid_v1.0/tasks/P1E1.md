# P1E1 - profiles RLS 정책

## 작업 ID
P1E1

## 담당 영역
RLS Policies

## 작업 개요
profiles 테이블에 대한 Row Level Security 정책을 설정합니다.

## 상세 설명
사용자는 자신의 프로필만 조회/수정할 수 있고, 다른 사용자의 프로필은 읽기만 가능하도록 RLS 정책을 설정합니다.

## 기술 스택
- Supabase RLS
- PostgreSQL Security

## 구현 사항
1. RLS 활성화
2. SELECT 정책 (모든 사용자가 모든 프로필 조회 가능)
3. INSERT 정책 (본인 프로필만 생성)
4. UPDATE 정책 (본인 프로필만 수정)
5. DELETE 정책 (본인 프로필만 삭제)

## RLS 정책 SQL
```sql
-- RLS 활성화
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;

-- SELECT: 모든 프로필 조회 가능
CREATE POLICY "Profiles are viewable by everyone"
ON profiles FOR SELECT
USING (true);

-- INSERT: 본인 프로필만 생성
CREATE POLICY "Users can insert their own profile"
ON profiles FOR INSERT
WITH CHECK (auth.uid() = id);

-- UPDATE: 본인 프로필만 수정
CREATE POLICY "Users can update own profile"
ON profiles FOR UPDATE
USING (auth.uid() = id);

-- DELETE: 본인 프로필만 삭제
CREATE POLICY "Users can delete own profile"
ON profiles FOR DELETE
USING (auth.uid() = id);
```

## 성공 기준
- [ ] RLS가 활성화됨
- [ ] 4개 정책이 모두 생성됨
- [ ] 본인 프로필 CRUD 테스트 성공
- [ ] 타인 프로필 수정 차단 테스트 성공

## 의존 작업
- P1D1 (profiles 테이블)

## 예상 소요 시간
30분

## 참고 사항
- auth.uid()는 Supabase Auth의 현재 로그인 사용자 ID
- RLS 테스트 시 여러 계정으로 확인 필요
