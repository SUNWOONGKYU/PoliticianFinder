#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
37개 신규 작업 추가 스크립트
- 리포트 다운로드 기능: 14개
- 결제 시스템: 23개
"""

import csv
from pathlib import Path

# 작업 데이터
NEW_TASKS = {
    # Phase 2 Frontend (7개)
    "P2F11": {
        "업무": "평가 리포트 다운로드 버튼",
        "작업지시서": "tasks/P2F11.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2F1",
        "블로커": "없음"
    },
    "P2F12": {
        "업무": "리포트 미리보기 모달",
        "작업지시서": "tasks/P2F12.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2F11",
        "블로커": "없음"
    },
    "P2F13": {
        "업무": "리포트 구매 버튼",
        "작업지시서": "tasks/P2F13.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2F1",
        "블로커": "없음"
    },
    "P2F14": {
        "업무": "AI 선택 모달 (1~5개)",
        "작업지시서": "tasks/P2F14.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2F13",
        "블로커": "없음"
    },
    "P2F15": {
        "업무": "결제 페이지 (토스페이먼츠)",
        "작업지시서": "tasks/P2F15.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2F14,P2B13",
        "블로커": "없음"
    },
    "P2F16": {
        "업무": "결제 완료 페이지",
        "작업지시서": "tasks/P2F16.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2F15",
        "블로커": "없음"
    },
    "P2F17": {
        "업무": "구매 내역 페이지",
        "작업지시서": "tasks/P2F17.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2B17",
        "블로커": "없음"
    },

    # Phase 2 Backend (9개)
    "P2B9": {
        "업무": "리포트 생성 API",
        "작업지시서": "tasks/P2B9.md",
        "담당AI": "api-designer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2B1,P2B2",
        "블로커": "없음"
    },
    "P2B10": {
        "업무": "PDF 생성 로직 (Puppeteer)",
        "작업지시서": "tasks/P2B10.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2B9",
        "블로커": "없음"
    },
    "P2B11": {
        "업무": "리포트 다운로드 API",
        "작업지시서": "tasks/P2B11.md",
        "담당AI": "api-designer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2B10",
        "블로커": "없음"
    },
    "P2B12": {
        "업무": "주문 생성 API",
        "작업지시서": "tasks/P2B12.md",
        "담당AI": "api-designer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2D6",
        "블로커": "없음"
    },
    "P2B13": {
        "업무": "토스페이먼츠 연동",
        "작업지시서": "tasks/P2B13.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2B12",
        "블로커": "없음"
    },
    "P2B14": {
        "업무": "결제 검증 로직",
        "작업지시서": "tasks/P2B14.md",
        "담당AI": "security-auditor",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "검토",
        "자동화방식": "수동",
        "의존작업": "P2B13",
        "블로커": "없음"
    },
    "P2B15": {
        "업무": "주문 완료 처리 (이메일 발송)",
        "작업지시서": "tasks/P2B15.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2B14",
        "블로커": "없음"
    },
    "P2B16": {
        "업무": "환불 처리 API",
        "작업지시서": "tasks/P2B16.md",
        "담당AI": "fullstack-developer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2B13",
        "블로커": "없음"
    },
    "P2B17": {
        "업무": "구매 내역 조회 API",
        "작업지시서": "tasks/P2B17.md",
        "담당AI": "api-designer",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "테스트",
        "자동화방식": "수동",
        "의존작업": "P2D6",
        "블로커": "없음"
    },

    # Phase 2 Database (3개)
    "P2D5": {
        "업무": "Report 테이블 확장",
        "작업지시서": "tasks/P2D5.md",
        "담당AI": "database-architect",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "검토",
        "자동화방식": "수동",
        "의존작업": "없음",
        "블로커": "없음"
    },
    "P2D6": {
        "업무": "Order 테이블",
        "작업지시서": "tasks/P2D6.md",
        "담당AI": "database-architect",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "검토",
        "자동화방식": "수동",
        "의존작업": "P2D1",
        "블로커": "없음"
    },
    "P2D7": {
        "업무": "Payment 테이블",
        "작업지시서": "tasks/P2D7.md",
        "담당AI": "database-architect",
        "진도": "0%",
        "상태": "대기",
        "테스트/검토": "검토",
        "자동화방식": "수동",
        "의존작업": "P2D6",
        "블로커": "없음"
    },
}

# Phase 3 작업도 추가 (계속...)
# 여기서는 Phase 2만 먼저 추가

def main():
    csv_file = Path("../project_grid_v1.2_full_XY.csv")

    if not csv_file.exists():
        print(f"[ERROR] CSV 파일 없음: {csv_file}")
        return

    # CSV 읽기
    with open(csv_file, 'r', encoding='utf-8') as f:
        reader = csv.reader(f)
        rows = list(reader)

    print(f"[OK] CSV 읽기 완료: {len(rows)}줄")

    # Phase 2 Frontend의 P2F10 위치 찾기
    # 이후에 P2F11~P2F17 추가

    # TODO: 작업 추가 로직
    print("[INFO] 작업 추가 로직은 수동으로 진행합니다")
    print(f"[INFO] 추가할 작업: {len(NEW_TASKS)}개")

    for task_id, task_data in NEW_TASKS.items():
        print(f"  - {task_id}: {task_data['업무']}")

if __name__ == "__main__":
    main()
