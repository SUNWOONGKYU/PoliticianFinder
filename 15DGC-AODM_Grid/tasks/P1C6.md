# P1C6 - 로그아웃 및 세션 종료

## 작업 ID
P1C6

## 담당 영역
Authentication

## 작업 개요
사용자 로그아웃 기능과 세션 완전 종료 처리를 구현합니다.

## 상세 설명
사용자가 안전하게 로그아웃하고 모든 세션 정보를 정리하는 기능을 구현합니다. 다중 디바이스 로그아웃도 고려합니다.

## 기술 스택
- Supabase Auth
- React Context API
- Next.js Router

## 구현 사항
1. 로그아웃 버튼 구현
2. 세션 종료 처리
3. 로컬 스토리지 정리
4. 로그인 페이지로 리다이렉트
5. 선택적 모든 디바이스 로그아웃

## 주요 코드
```javascript
// 기본 로그아웃 (현재 디바이스)
const handleLogout = async () => {
  const { error } = await supabase.auth.signOut()
  
  if (error) {
    console.error('Logout error:', error.message)
  } else {
    // 로컬 상태 정리
    setUser(null)
    setSession(null)
    
    // 로그인 페이지로 리다이렉트
    router.push('/login')
  }
}

// 모든 디바이스에서 로그아웃
const handleLogoutAllDevices = async () => {
  const { error } = await supabase.auth.signOut({ scope: 'global' })
  
  if (error) {
    console.error('Global logout error:', error.message)
  } else {
    alert('모든 디바이스에서 로그아웃되었습니다.')
    router.push('/login')
  }
}

// Navbar 로그아웃 버튼
<button 
  onClick={handleLogout}
  className="logout-btn"
>
  로그아웃
</button>
```

## 로그아웃 시 정리 항목
- Supabase 세션 종료
- AuthContext 상태 초기화
- localStorage 세션 정보 삭제
- 브라우저 캐시 정리 (선택)
- 진행 중인 API 요청 취소 (선택)

## 성공 기준
- [ ] 로그아웃 버튼 Navbar에 구현
- [ ] 로그아웃 시 세션 완전 종료
- [ ] localStorage 정리 확인
- [ ] 로그인 페이지로 정상 리다이렉트
- [ ] 로그아웃 후 보호된 페이지 접근 차단
- [ ] 모든 디바이스 로그아웃 옵션 제공

## 의존 작업
- P1F4 (Navbar 컴포넌트)
- P1C4 (세션 관리)

## 예상 소요 시간
1시간

## 참고 사항
- 로그아웃 전 확인 다이얼로그 고려
- 저장하지 않은 데이터 경고
- 로그아웃 이벤트 로깅
- 보안을 위한 민감 정보 완전 삭제
