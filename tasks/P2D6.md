# P2D6: Home API Service Layer (Frontend)

## 작업 ID
P2D6

## 작업 개요
Frontend에서 Supabase 직접 쿼리를 통한 홈 데이터 fetch 서비스 레이어 구현

## 담당 AI
fullstack-developer

## 의존 작업
P2D1, P2D2, P2D3, P2D4

## 작업 내용

### 1. TypeScript 인터페이스 정의
```typescript
export interface PoliticianRanking {
  id: number;
  name: string;
  party: string;
  region: string;
  position: string;
  status: string;
  profile_image_url?: string;
  claude_score?: number;
  gpt_score?: number;
  gemini_score?: number;
  grok_score?: number;
  perplexity_score?: number;
  composite_score?: number;
  member_rating: number;
  member_rating_count: number;
}

export interface HotPost { ... }
export interface PoliticianPost { ... }
export interface HomeData { ... }
```

### 2. API 함수 구현
```typescript
export async function getHomeData(): Promise<HomeData> {
  // v_ai_ranking_top10 뷰 조회
  // v_hot_posts_top15 뷰 조회
  // v_politician_posts_recent9 뷰 조회
  // get_sidebar_data RPC 호출
}

export async function getAIRanking(options): Promise<PoliticianRanking[]>
export async function getHotPosts(limit): Promise<HotPost[]>
export async function getPoliticianPosts(limit): Promise<PoliticianPost[]>
export async function getSidebarData(): Promise<any>
```

### 3. Supabase 클라이언트 활용
- `supabase.from('view').select('*')`
- `supabase.rpc('function_name', params)`
- `supabase.auth.getUser()`
- 에러 처리

## 산출물
- `frontend/src/lib/api/home.ts`

## 검증 방법
```typescript
import { getHomeData } from '@/lib/api/home';
const data = await getHomeData();
console.log(data);
```

## 예상 소요 시간
30분

## 완료 조건
- [x] TypeScript 인터페이스 4개 정의
- [x] API 함수 5개 구현
- [x] Supabase 직접 쿼리 구현
- [x] 에러 처리 구현

## 상태
✅ 완료 (2025-10-20 02:00)
