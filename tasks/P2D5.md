# P2D5: Home API Router (FastAPI)

## 작업 ID
P2D5

## 작업 개요
메인 페이지를 위한 FastAPI 라우터 구현

## 담당 AI
fullstack-developer

## 의존 작업
P2D1, P2D2, P2D3, P2D4

## 작업 내용

### 1. Pydantic 모델 정의
```python
class PoliticianRanking(BaseModel):
    id: int
    name: str
    party: str
    region: str
    position: str
    status: str
    profile_image_url: Optional[str]
    claude_score: Optional[Decimal]
    gpt_score: Optional[Decimal]
    gemini_score: Optional[Decimal]
    grok_score: Optional[Decimal]
    perplexity_score: Optional[Decimal]
    composite_score: Optional[Decimal]
    member_rating: Decimal
    member_rating_count: int

class HotPost(BaseModel): ...
class PoliticianPost(BaseModel): ...
class HomeData(BaseModel): ...
```

### 2. API 엔드포인트
```python
@router.get("", response_model=HomeData)
async def get_home_data()
# AI 평점 TOP 10 + 인기글 15 + 정치인 글 9 + 사이드바

@router.get("/ai-ranking", response_model=List[PoliticianRanking])
async def get_ai_ranking(limit, offset, filter_type, filter_value)

@router.get("/hot-posts", response_model=List[HotPost])
async def get_hot_posts(limit)

@router.get("/politician-posts", response_model=List[PoliticianPost])
async def get_politician_posts(limit)

@router.get("/sidebar")
async def get_sidebar_data()
```

### 3. 데이터베이스 쿼리
- PostgreSQL View 활용
- RPC 함수 호출
- 에러 처리

## 산출물
- `api/app/routers/home.py`

## 검증 방법
```bash
curl http://localhost:8000/api/home
curl http://localhost:8000/api/home/ai-ranking?limit=10
```

## 예상 소요 시간
45분

## 완료 조건
- [x] Pydantic 모델 4개 정의
- [x] API 엔드포인트 5개 구현
- [x] 에러 처리 구현
- [x] 통합 HomeData 엔드포인트 구현

## 상태
✅ 완료 (2025-10-20 02:00)
