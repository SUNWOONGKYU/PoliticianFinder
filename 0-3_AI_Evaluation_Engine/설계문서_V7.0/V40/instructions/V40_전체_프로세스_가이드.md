# V40 ì „ì²´ í”„ë¡œì„¸ìŠ¤ ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2026-02-01
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-06
**ë²„ì „**: V40
**ëª©ì **: ì •ì¹˜ì¸ ì •ë³´ ì¤€ë¹„ë¶€í„° ìƒì„¸í‰ê°€ë³´ê³ ì„œ ìƒì„±ê¹Œì§€ ì™„ì „í•œ í”„ë¡œì„¸ìŠ¤

---

## 1. V40 ê°œìš”

### í•µì‹¬ ë³€ê²½ì‚¬í•­

| í•­ëª© | V30 | V40 |
|------|-----|-----|
| ìˆ˜ì§‘ ì±„ë„ | 2ê°œ (Gemini, Perplexity) | **2ê°œ (Gemini, Naver)** |
| í‰ê°€ AI | 4ê°œ | **4ê°œ (Claude, ChatGPT, Gemini, Grok)** |
| ìˆ˜ì§‘ ë°©ì‹ | ì›¹ê²€ìƒ‰ í•„ìˆ˜ | **ì›¹ê²€ìƒ‰ í•„ìˆ˜** |
| ìˆ˜ì§‘ ê°œìˆ˜ | 50ê°œ/ì¹´í…Œê³ ë¦¬ | **100ê°œ/ì¹´í…Œê³ ë¦¬ (ë²„í¼ 20% í¬í•¨ ìµœëŒ€ 120ê°œ)** |
| ë°ì´í„° ìœ í˜• | OFFICIAL/PUBLIC ë¶„ë¦¬ | **OFFICIAL/PUBLIC ë¶„ë¦¬** |
| í‰ê°€ ë°©ì‹ | í’€ë§ í‰ê°€ | **í’€ë§ í‰ê°€** |

### ìˆ˜ì§‘ ë°°ë¶„

```
Gemini  50% = OFFICIAL 30ê°œ (30%) + PUBLIC 20ê°œ (20%)
Naver   50% = OFFICIAL 10ê°œ (10%) + PUBLIC 40ê°œ (40%)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
í•©ê³„   100% = 100ê°œ/ì¹´í…Œê³ ë¦¬ (ë²„í¼ 20% í¬í•¨ ìµœëŒ€ 120ê°œ)

ğŸ“Œ OFFICIAL vs PUBLIC:
- OFFICIAL (40ê°œ): ê°ê´€ì  ì‚¬ì‹¤
  Gemini 30ê°œ (30%) + Naver 10ê°œ (10%)

- PUBLIC (60ê°œ): ì˜ê²¬/í‰ê°€
  Gemini 20ê°œ (20%) + Naver 40ê°œ (40%)

âš ï¸ Claude/ChatGPT/Grok = ìˆ˜ì§‘ ì œì™¸ â†’ í‰ê°€ë§Œ ë‹´ë‹¹
```

### AIë³„ ìˆ˜ì§‘/í‰ê°€ ì—­í• 

| AI | ìˆ˜ì§‘ | í‰ê°€ | ë¹„ê³  |
|---|---|---|---|
| **Gemini** | âœ… 50% | âœ… | Google Search **ë¬´ë£Œ** âœ… |
| **Naver** | âœ… 50% | âŒ | Naver Search **ë¬´ë£Œ** âœ… |
| **Claude** | âŒ | âœ… | **$0** (CLI Direct) |
| **ChatGPT** | âŒ | âœ… | í‰ê°€ë§Œ |
| **Grok** | âŒ | âœ… | í‰ê°€ë§Œ |

---

## 2. ì‚¬ì „ ì¤€ë¹„

### 2.1 API í‚¤ ì„¤ì •

`.env` íŒŒì¼ì— ë‹¤ìŒ í‚¤ ì„¤ì •:

```bash
# ìˆ˜ì§‘ìš© (1ê°œ API + 1ê°œ CLI)
# âš ï¸ GeminiëŠ” CLI ì‚¬ìš© (API í‚¤ ë¶ˆí•„ìš”) - gemini_collect_helper.py ì°¸ì¡°
NAVER_CLIENT_ID=...              # Naver (50% ìˆ˜ì§‘) - ë¬´ë£Œ
NAVER_CLIENT_SECRET=...          # Naver (50% ìˆ˜ì§‘) - ë¬´ë£Œ

# í‰ê°€ìš© (2ê°œ API + 2ê°œ CLI)
# âš ï¸ ClaudeëŠ” CLI Direct ì‚¬ìš© (API í‚¤ ë¶ˆí•„ìš”)
# âš ï¸ GeminiëŠ” CLI ì‚¬ìš© (API í‚¤ ë¶ˆí•„ìš”) - gemini_eval_helper.py ì°¸ì¡°
OPENAI_API_KEY=sk-...            # ChatGPT (í‰ê°€ë§Œ, API)
XAI_API_KEY=xai-...              # Grok (í‰ê°€ë§Œ, API)

# Supabase
SUPABASE_URL=https://...
SUPABASE_SERVICE_ROLE_KEY=eyJ...
```

> **ì°¸ê³ **: GeminiëŠ” ìˆ˜ì§‘/í‰ê°€ ëª¨ë‘ CLI í„°ë¯¸ë„ì—ì„œ ì§ì ‘ ì‹¤í–‰í•©ë‹ˆë‹¤.
> - ìˆ˜ì§‘: `gemini_collect_helper.py fetch` â†’ Gemini CLIì— í”„ë¡¬í”„íŠ¸ ë¶™ì—¬ë„£ê¸° â†’ `gemini_collect_helper.py save`
> - í‰ê°€: `gemini_eval_helper.py fetch` â†’ Gemini CLIì— í”„ë¡¬í”„íŠ¸ ë¶™ì—¬ë„£ê¸° â†’ `gemini_eval_helper.py save`
> - **ì—ëŸ¬ ì²˜ë¦¬**: CLI Direct ì—ëŸ¬ ì²˜ë¦¬ ë°©ë²•ì€ â†’ 4.2.1ì ˆ ì°¸ì¡°

### 2.2 ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ìƒì„±

```sql
-- V40 ìˆ˜ì§‘ ë°ì´í„° í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS collected_data_v40 (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    politician_id TEXT NOT NULL,
    politician_name TEXT NOT NULL,
    category TEXT NOT NULL,
    data_type TEXT NOT NULL,           -- 'official' or 'public'
    collector_ai TEXT NOT NULL,        -- 'Gemini', 'Naver'
    title TEXT NOT NULL,
    content TEXT NOT NULL,
    source_url TEXT NOT NULL,
    source_name TEXT,
    published_date DATE,
    sentiment TEXT,                    -- 'positive', 'negative', 'neutral', 'free'
    is_verified BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- V40 í‰ê°€ í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS evaluations_v40 (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    politician_id TEXT NOT NULL,
    politician_name TEXT NOT NULL,
    category TEXT NOT NULL,
    collected_data_id UUID NOT NULL,
    evaluator_ai TEXT NOT NULL,        -- 'Claude', 'ChatGPT', 'Gemini', 'Grok'
    rating TEXT NOT NULL,              -- '+4' ~ '-4'
    score INTEGER NOT NULL,            -- -8 ~ +8
    reasoning TEXT,
    evaluated_at TIMESTAMPTZ DEFAULT NOW()
);

-- V40 ì¹´í…Œê³ ë¦¬ ì ìˆ˜ í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS ai_category_scores_v40 (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    politician_id TEXT NOT NULL,
    politician_name TEXT NOT NULL,
    category TEXT NOT NULL,
    score INTEGER NOT NULL,
    ai_details JSONB,
    calculated_at TIMESTAMPTZ DEFAULT NOW()
);

-- V40 ìµœì¢… ì ìˆ˜ í…Œì´ë¸”
CREATE TABLE IF NOT EXISTS ai_final_scores_v40 (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    politician_id TEXT NOT NULL,
    politician_name TEXT NOT NULL,
    final_score INTEGER NOT NULL,
    grade TEXT NOT NULL,
    category_scores JSONB,
    calculated_at TIMESTAMPTZ DEFAULT NOW(),
    version TEXT DEFAULT 'V40'
);

-- ì¸ë±ìŠ¤
CREATE INDEX IF NOT EXISTS idx_v40_collected_politician ON collected_data_v40(politician_id);
CREATE INDEX IF NOT EXISTS idx_v40_collected_category ON collected_data_v40(category);
CREATE INDEX IF NOT EXISTS idx_v40_eval_politician ON evaluations_v40(politician_id);
```

### 2.3 ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pip install anthropic openai google-generativeai supabase python-dotenv json-repair
```

---

## 3. ì „ì²´ í”„ë¡œì„¸ìŠ¤ (7ë‹¨ê³„)

### ğŸ“Š í”„ë¡œì„¸ìŠ¤ ê°œìš”

```
ì •ì¹˜ì¸ ì •ë³´ ì‘ì„± (MD) â†’ DB ë“±ë¡ â†’ ë°ì´í„° ìˆ˜ì§‘ (1,000ê°œ)
â†’ ê²€ì¦ â†’ AI í‰ê°€ (4,000ê°œ) â†’ í‰ê°€ ê²€ì¦ â†’ ì ìˆ˜ ê³„ì‚° â†’ ë³´ê³ ì„œ ìƒì„±
```

### ìƒì„¸ í”„ë¡œì„¸ìŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Phase 1] ì¤€ë¹„ - ì •ì¹˜ì¸ ì •ë³´ ì‘ì„± ë° DB ë“±ë¡                â”‚
â”‚                                                             â”‚
â”‚ 1. instructions/1_politicians/{ì •ì¹˜ì¸ëª…}.md ì‘ì„±            â”‚
â”‚    - ì´ë¦„, ìƒë…„ì›”ì¼, ì§ìœ„, ì •ë‹¹, í•™ë ¥, ê²½ë ¥ ë“±              â”‚
â”‚                                                             â”‚
â”‚ 2. politicians í…Œì´ë¸”ì— INSERT                              â”‚
â”‚    - id (TEXT, 8ìë¦¬ hex), name, party, position ë“±        â”‚
â”‚                     â†“                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Phase 2] ìˆ˜ì§‘ - collect_v40.py (2ê°œ AI)                    â”‚
â”‚                                                             â”‚
â”‚ Gemini      â”€â”€â”¬â”€â”€ OFFICIAL 30ê°œ (Google Search ë¬´ë£Œ)       â”‚
â”‚               â””â”€â”€ PUBLIC 20ê°œ (Google Search ê¸°ë°˜)         â”‚
â”‚                                                             â”‚
â”‚ Naver       â”€â”€â”¬â”€â”€ OFFICIAL 10ê°œ (Naver Search ë¬´ë£Œ)        â”‚
â”‚               â””â”€â”€ PUBLIC 40ê°œ (Naver Search ê¸°ë°˜)          â”‚
â”‚                                                             â”‚
â”‚ âš ï¸ Claude/ChatGPT/Grok = ìˆ˜ì§‘ ì œì™¸ (í‰ê°€ë§Œ)               â”‚
â”‚                     â†“                                       â”‚
â”‚            collected_data_v40 ì €ì¥                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Phase 3] ê²€ì¦ & ì¬ìˆ˜ì§‘ - validate_v40.py                   â”‚
â”‚                                                             â”‚
â”‚ ê²€ì¦ í•­ëª©:                                                  â”‚
â”‚ âœ“ URL ì‹¤ì œ ì¡´ì¬ ì—¬ë¶€ (HEAD/GET ìš”ì²­)                       â”‚
â”‚ âœ“ data_type ê·œì¹™ (OFFICIAL/PUBLIC ë„ë©”ì¸ ë§¤ì¹­)             â”‚
â”‚ âœ“ í•„ìˆ˜ í•„ë“œ ê²€ì¦ (title, content, source_url)              â”‚
â”‚ âœ“ ê¸°ê°„ ì œí•œ ê²€ì¦ (ê³µì‹ 4ë…„, ê³µê°œ 2ë…„)                      â”‚
â”‚ âœ“ ê°€ì§œ URL íŒ¨í„´ íƒì§€                                       â”‚
â”‚                     â†“                                       â”‚
â”‚ ê²€ì¦ ì‹¤íŒ¨ â†’ ì‚­ì œ â†’ í•´ë‹¹ AIë¡œ ì¬ìˆ˜ì§‘ (ìµœëŒ€ 5íšŒ ë°˜ë³µ)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Phase 3-2] í’€ë§ & ê³ ê¸‰ ì¤‘ë³µ ì œê±° âœ¨                        â”‚
â”‚                                                             â”‚
â”‚ 2ê°œ AI ìˆ˜ì§‘ ë°ì´í„° í†µí•©                                     â”‚
â”‚                                                             â”‚
â”‚ ğŸ”¥ ê³ ê¸‰ ì¤‘ë³µ ê²€ì‚¬ (URL + ì œëª©):                             â”‚
â”‚ 1. URL ì •ê·œí™” (íŒŒë¼ë¯¸í„°, ì•µì»¤ ì œê±°)                         â”‚
â”‚    - https://namu.wiki/w/XX?rev=456 â†’ https://namu.wiki/w/XXâ”‚
â”‚    - https://news.com/art#s-1 â†’ https://news.com/art        â”‚
â”‚                                                             â”‚
â”‚ 2. ì œëª© ì •ê·œí™” (ê³µë°±, íŠ¹ìˆ˜ë¬¸ì ì œê±°)                        â”‚
â”‚    - "ê¹€ë¯¼ì„/ë¹„íŒ ë° ë…¼ë€" â†’ "ê¹€ë¯¼ì„ë¹„íŒë°ë…¼ë€"             â”‚
â”‚                                                             â”‚
â”‚ 3. ì¤‘ë³µ íŒë‹¨ ê¸°ì¤€:                                          â”‚
â”‚    - ê°™ì€ AI + (ê°™ì€ URL OR ì œëª© 95% ìœ ì‚¬) â†’ ì¤‘ë³µ ì œê±°     â”‚
â”‚    - ë‹¤ë¥¸ AI + ê°™ì€ URL/ì œëª© â†’ ëª¨ë‘ ìœ ì§€ (ìì—° ê°€ì¤‘ì¹˜)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Phase 4] í‰ê°€ - evaluate_v40.py (4ê°œ AI)                   â”‚
â”‚                                                             â”‚
â”‚ Claude     â”€â”€â”¬â”€â”€ í’€ë§ëœ ì „ì²´ ë°ì´í„° í‰ê°€                   â”‚
â”‚ ChatGPT    â”€â”€â”¤  (CLI Direct: API ë¹„ìš© $0)                 â”‚
â”‚ Gemini     â”€â”€â”¤                                             â”‚
â”‚ Grok       â”€â”€â”˜                                             â”‚
â”‚                     â†“                                       â”‚
â”‚            evaluations_v40 ì €ì¥                             â”‚
â”‚            (collected_data_idë¡œ ìˆ˜ì§‘ ë°ì´í„°ì™€ ì—°ê²°)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Phase 5] í‰ê°€ ê²€ì¦ - ìë™ ì²˜ë¦¬                             â”‚
â”‚                                                             â”‚
â”‚ í‰ê°€ ì™„ì„±ë„ í™•ì¸:                                            â”‚
â”‚ âœ“ ê¸°ì¤€: 97% ì´ìƒ                                            â”‚
â”‚ âœ“ ê³„ì‚°: (ì‹¤ì œ í‰ê°€ ìˆ˜ / ê¸°ëŒ€ í‰ê°€ ìˆ˜) Ã— 100                 â”‚
â”‚   ê¸°ëŒ€ í‰ê°€ ìˆ˜ = ìˆ˜ì§‘ í’€ ì´ìˆ˜ Ã— 4 (AI ìˆ˜)                   â”‚
â”‚   ì˜ˆ) í’€ 1,050ê°œ â†’ ê¸°ëŒ€ 4,200ê°œ â†’ 97% = 4,074ê°œ ì´ìƒ       â”‚
â”‚ âœ“ ë¯¸ë‹¬ ì‹œ: ëˆ„ë½ í‰ê°€ ì¬ì‹¤í–‰ (ìë™)                          â”‚
â”‚                     â†“                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Phase 6] ì ìˆ˜ ê³„ì‚° - calculate_v40_scores.py               â”‚
â”‚                                                             â”‚
â”‚ 4ê°œ AI í‰ê°€ ê²°ê³¼ ì¢…í•© â†’ ì¹´í…Œê³ ë¦¬ ì ìˆ˜ â†’ ìµœì¢… ì ìˆ˜          â”‚
â”‚                     â†“                                       â”‚
â”‚   ai_category_scores_v40, ai_final_scores_v40 ì €ì¥         â”‚
â”‚   (AIë³„ ì ìˆ˜ JSONB ì €ì¥)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Phase 7] ë³´ê³ ì„œ ìƒì„± - generate_report_v40.py              â”‚
â”‚                                                             â”‚
â”‚ 1. 4ê°œ í…Œì´ë¸” ì¡°ì¸ (politicians + collected_data_v40 +      â”‚
â”‚    evaluations_v40 + ai_final_scores_v40)                   â”‚
â”‚                                                             â”‚
â”‚ 2. AIë³„ í†µê³„ ê³„ì‚°                                            â”‚
â”‚    - AIë³„ í‰ê·  ë“±ê¸‰, X ë¹„ìœ¨, ê¸ì •/ë¶€ì • ë¹„ìœ¨                 â”‚
â”‚    - AIë³„ í‰ê°€ ì„±í–¥ ë¶„ì„                                     â”‚
â”‚                                                             â”‚
â”‚ 3. ì¹´í…Œê³ ë¦¬ë³„ ë¶„ì„ (10ê°œ)                                    â”‚
â”‚    - AIë³„ ì ìˆ˜ ë¹„êµ                                          â”‚
â”‚    - ëŒ€í‘œ ê¸ì •/ë¶€ì • í‰ê°€ ì‚¬ë¡€                                â”‚
â”‚                                                             â”‚
â”‚ 4. ë§ˆí¬ë‹¤ìš´ ë³´ê³ ì„œ ìƒì„±                                      â”‚
â”‚    - ì¢…í•© ê°œìš” (ìµœì¢… ì ìˆ˜, AIë³„ ì ìˆ˜, ì¹´í…Œê³ ë¦¬ ì ìˆ˜)        â”‚
â”‚    - AIë³„ ë¹„êµ ë¶„ì„                                          â”‚
â”‚    - ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ í‰ê°€                                    â”‚
â”‚    - ë°ì´í„° ì¶œì²˜ ë¶„ì„                                        â”‚
â”‚                     â†“                                       â”‚
â”‚ 5. íŒŒì¼ ì €ì¥                                                 â”‚
â”‚    AI_ê¸°ë°˜_ì •ì¹˜ì¸_ìƒì„¸í‰ê°€ë³´ê³ ì„œ_{ì •ì¹˜ì¸ëª…}_{ë‚ ì§œ}.md       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ì‹¤í–‰ ë°©ë²•

### 4.1 ìˆ˜ì§‘ (collect_v40.py)

```bash
# ì „ì²´ ìˆ˜ì§‘ (Gemini + Naver)
python collect_v40.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬" \
  --parallel

# íŠ¹ì • AIë§Œ
python collect_v40.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬" \
  --ai=Gemini

python collect_v40.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬" \
  --ai=Naver

# íŠ¹ì • ì¹´í…Œê³ ë¦¬ë§Œ
python collect_v40.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬" \
  --category=1  # 1=expertise

# ë¯¸ë‹ˆ í…ŒìŠ¤íŠ¸ (ì¹´í…Œê³ ë¦¬ë‹¹ 10ê°œ)
python collect_v40.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬" \
  --test
```

### 4.2 í‰ê°€ (Claude CLI Direct)

#### ë°©ë²• 1: evaluate_claude_auto.py (ê¶Œì¥)

```bash
# 1. í‰ê°€ ì‘ì—… ìƒì„±
python evaluate_claude_auto.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬" \
  --category=communication \
  --output=eval_communication.md

# 2. í‰ê°€ ìˆ˜í–‰ (Claude Codeì—ê²Œ ìš”ì²­)
"eval_communication.md íŒŒì¼ì˜ í‰ê°€ ì‘ì—…ì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”"

# 3. DB ì €ì¥
python evaluate_claude_auto.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬" \
  --category=communication \
  --import_results=eval_communication_result.json
```

#### ë°©ë²• 2: evaluate_v40.py (ê¸°ì¡´ ë°©ì‹)

```bash
# 4ê°œ AI í‰ê°€ (ë³‘ë ¬)
python evaluate_v40.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬" \
  --parallel
```

### 4.2.1 CLI Direct ì—ëŸ¬ ì²˜ë¦¬

CLI Direct (Gemini, Claude) ì‹¤í–‰ ì‹œ ì—ëŸ¬ ë°œìƒ ì²˜ë¦¬ ì ˆì°¨:

**1. JSON í˜•ì‹ ê²€ì¦**: ì €ì¥ ì „ ë°˜ë“œì‹œ JSON ìœ íš¨ì„± í™•ì¸

**2. ì¬ì‹œë„**: ì‹¤íŒ¨ ì‹œ ìµœëŒ€ 3íšŒ ì¬ì‹œë„

**3. ë¶€ë¶„ ì‹¤íŒ¨**: ì¼ë¶€ ì¹´í…Œê³ ë¦¬ë§Œ ì‹¤íŒ¨ ì‹œ í•´ë‹¹ ì¹´í…Œê³ ë¦¬ë§Œ ì¬ìˆ˜ì§‘/ì¬í‰ê°€

**4. ì™„ì „ ì‹¤íŒ¨**: 3íšŒ ì¬ì‹œë„ í›„ì—ë„ ì‹¤íŒ¨ â†’ ì—ëŸ¬ ë¡œê·¸ ê¸°ë¡ + ìš´ì˜ì í™•ì¸ ìš”ì²­

```python
# CLI Direct ì—ëŸ¬ ì²˜ë¦¬ ì˜ˆì‹œ
def validate_cli_output(json_str):
    """CLI Direct ì¶œë ¥ JSON ê²€ì¦"""
    try:
        data = json.loads(json_str)
        required_fields = ['title', 'content', 'source_url', 'data_type', 'sentiment']

        for item in data:
            missing = [f for f in required_fields if f not in item]
            if missing:
                raise ValueError(f"í•„ìˆ˜ í•„ë“œ ëˆ„ë½: {missing}")

        return data
    except json.JSONDecodeError as e:
        print(f"âŒ JSON íŒŒì‹± ì‹¤íŒ¨: {e}")
        return None
    except Exception as e:
        print(f"âŒ ê²€ì¦ ì‹¤íŒ¨: {e}")
        return None

# ì¬ì‹œë„ ë¡œì§
def save_with_retry(json_str, max_retries=3):
    """ì¬ì‹œë„ ë¡œì§ í¬í•¨ ì €ì¥"""
    for attempt in range(1, max_retries + 1):
        validated_data = validate_cli_output(json_str)

        if validated_data:
            # DB ì €ì¥ ë¡œì§
            print(f"âœ… ì €ì¥ ì„±ê³µ (ì‹œë„ {attempt}íšŒ)")
            return True
        else:
            print(f"âš ï¸ ì €ì¥ ì‹¤íŒ¨ (ì‹œë„ {attempt}/{max_retries})")
            if attempt < max_retries:
                print("ì¬ì‹œë„ ì¤‘...")

    print("âŒ ì™„ì „ ì‹¤íŒ¨ - ìš´ì˜ì í™•ì¸ í•„ìš”")
    return False
```

**ì—ëŸ¬ ìœ í˜•ë³„ ëŒ€ì‘**:

| ì—ëŸ¬ ìœ í˜• | ì›ì¸ | í•´ê²° ë°©ë²• |
|-----------|------|-----------|
| JSON íŒŒì‹± ì‹¤íŒ¨ | ì˜ëª»ëœ JSON í˜•ì‹ | Claude/Gemini CLIì— ë‹¤ì‹œ í”„ë¡¬í”„íŠ¸ ì…ë ¥ (ìˆ˜ì • ìš”ì²­) |
| í•„ìˆ˜ í•„ë“œ ëˆ„ë½ | title, content ë“± ëˆ„ë½ | í”„ë¡¬í”„íŠ¸ ì¬ì‹¤í–‰ |
| URL í˜•ì‹ ì˜¤ë¥˜ | ì˜ëª»ëœ URL | í”„ë¡¬í”„íŠ¸ ìˆ˜ì • (URL ì˜ˆì‹œ ì¶”ê°€) |
| ë°ì´í„° íƒ€ì… ì˜¤ë¥˜ | official/public ì™¸ ê°’ | í”„ë¡¬í”„íŠ¸ ìˆ˜ì • (data_type ëª…ì‹œ) |
| DB ì—°ê²° ì‹¤íŒ¨ | Supabase ì—°ê²° ì˜¤ë¥˜ | ë„¤íŠ¸ì›Œí¬ í™•ì¸, API í‚¤ í™•ì¸ |

### 4.3 ì ìˆ˜ ê³„ì‚° (calculate_v40_scores.py)

```bash
python calculate_v40_scores.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬"
```

### 4.4 ê²°ê³¼ í™•ì¸ (check_v40_results.py)

```bash
# ì „ì²´ ê²°ê³¼ í™•ì¸
python check_v40_results.py \
  --politician_id=d0a5d6e1 \
  --politician_name="ì¡°ì€í¬"
```

---

## 5. ìˆ˜ì§‘ ìƒì„¸

### 5.1 OFFICIAL vs PUBLIC ë¶„ë‹´

#### OFFICIAL (40ê°œ) - Gemini 30 + Naver 10

**íŠ¹ì§•**:
- ê°ê´€ì  ì‚¬ì‹¤ (ëˆ„ê°€ ìˆ˜ì§‘í•˜ë“  ë™ì¼)
- í¸í–¥ ë°œìƒ ì—¬ì§€ ì—†ìŒ
- .go.kr ë„ë©”ì¸ ë“± ê³µì‹ ì‚¬ì´íŠ¸

**ì†ŒìŠ¤ ì˜ˆì‹œ**:
- êµ­íšŒ ì˜ì•ˆì •ë³´ (assembly.go.kr)
- ì •ë¶€ ë³´ë„ìë£Œ (korea.kr)
- ì„ ê±°ê´€ë¦¬ìœ„ì›íšŒ (nec.go.kr)
- ì •ë‹¹ ê³µì‹ ì‚¬ì´íŠ¸

#### PUBLIC (60ê°œ) - Gemini 20 + Naver 40

**íŠ¹ì§•**:
- ì˜ê²¬/í‰ê°€ (ì¶œì²˜ë§ˆë‹¤ ì‹œê° ë‹¤ë¦„)
- í¸í–¥ ë°œìƒ ê°€ëŠ¥
- ë‹¤ì–‘ì„± í•„ìš”

**Gemini PUBLIC (20ê°œ)**:
- Google Search ê¸°ë°˜
- ëª¨ë“  PUBLIC ì†ŒìŠ¤ ììœ 

**Naver PUBLIC (40ê°œ)**:
- Naver Search ê¸°ë°˜
- ëª¨ë“  PUBLIC ì†ŒìŠ¤ ììœ 

**âš ï¸ ì†ŒìŠ¤ ì œí•œ ì›ì¹™**:
ì œí•œì€ ë”± 2ê°œë§Œ:
1. OFFICIALì€ OFFICIAL ì†ŒìŠ¤ë§Œ
2. PUBLICì€ PUBLIC ì†ŒìŠ¤ë§Œ

ê·¸ ì™¸ ì†ŒìŠ¤ ì œí•œ/ì°¨ë‹¨/ê¸ˆì§€ ì¼ì²´ ì—†ìŒ

### 5.2 ì„¼í‹°ë©˜íŠ¸ ë°°ë¶„ (OFFICIAL 10-10-80 / PUBLIC 20-20-60)

```python
SENTIMENT_DISTRIBUTION = {
    "Gemini": {
        "official": {"negative": 3, "positive": 3, "free": 24},    # 30ê°œ (10-10-80)
        "public": {"negative": 4, "positive": 4, "free": 12}       # 20ê°œ (20-20-60)
    },
    "Naver": {
        "official": {"negative": 1, "positive": 1, "free": 8},     # 10ê°œ (10-10-80)
        "public": {"negative": 8, "positive": 8, "free": 24}       # 40ê°œ (20-20-60)
    }
}

# ë²„í¼ 20% í¬í•¨ ëª©í‘œ (ê° AIë³„ ê°œìˆ˜ Ã— 1.2, ì„¼í‹°ë©˜íŠ¸ ë¹„ìœ¨ ìœ ì§€)
SENTIMENT_DISTRIBUTION_BUFFER = {
    "Gemini": {
        "official": {"negative": 4, "positive": 4, "free": 28},    # 36ê°œ (10-10-80)
        "public": {"negative": 5, "positive": 5, "free": 14}       # 24ê°œ (20-20-60)
    },
    "Naver": {
        "official": {"negative": 1, "positive": 1, "free": 10},    # 12ê°œ (10-10-80)
        "public": {"negative": 10, "positive": 10, "free": 28}     # 48ê°œ (20-20-60)
    }
}

# === ê¸°ë³¸ (100ê°œ) ===
# OFFICIAL (40ê°œ): ë¶€ì • 3+1=4 (10%) / ê¸ì • 3+1=4 (10%) / ììœ  24+8=32 (80%)
# PUBLIC   (60ê°œ): ë¶€ì • 4+8=12 (20%) / ê¸ì • 4+8=12 (20%) / ììœ  12+24=36 (60%)
# ì „ì²´    (100ê°œ): ë¶€ì • 16 (16%) / ê¸ì • 16 (16%) / ììœ  68 (68%)

# === ë²„í¼ í¬í•¨ (120ê°œ) ===
# OFFICIAL (48ê°œ): ë¶€ì • 4+1=5 (10%) / ê¸ì • 4+1=5 (10%) / ììœ  28+10=38 (80%)
# PUBLIC   (72ê°œ): ë¶€ì • 5+10=15 (21%) / ê¸ì • 5+10=15 (21%) / ììœ  14+28=42 (58%)
# ì „ì²´    (120ê°œ): ë¶€ì • 20 (17%) / ê¸ì • 20 (17%) / ììœ  80 (67%)
```

---

## 6. í‰ê°€ ìƒì„¸

### 6.1 í’€ë§ í‰ê°€ ë°©ì‹

```
[ìˆ˜ì§‘ ë‹¨ê³„]
Gemini 50ê°œ (50%) + Naver 50ê°œ (50%) = 100ê°œ í’€ (ë²„í¼ 20% í¬í•¨ ìµœëŒ€ 120ê°œ)
(ì¤‘ë³µ ì œê±° ì•ˆ í•¨, ê·¸ëŒ€ë¡œ í•©ì¹¨)

[í‰ê°€ ë‹¨ê³„]
4ê°œ AI Ã— 100ê°œ = 400ê°œ í‰ê°€
- Claude: 100ê°œ í‰ê°€ ($0, CLI Direct)
- ChatGPT: 100ê°œ í‰ê°€
- Grok: 100ê°œ í‰ê°€
- Gemini: 100ê°œ í‰ê°€
```

### 6.2 í‰ê°€ ë“±ê¸‰ ì²´ê³„

| ë“±ê¸‰ | íŒë‹¨ ê¸°ì¤€ | ì ìˆ˜ |
|------|-----------|------|
| +4 | íƒì›”í•¨ - í•´ë‹¹ ë¶„ì•¼ ëª¨ë²” ì‚¬ë¡€ | +8 |
| +3 | ìš°ìˆ˜í•¨ - ê¸ì •ì  í‰ê°€ | +6 |
| +2 | ì–‘í˜¸í•¨ - ê¸°ë³¸ ì¶©ì¡± | +4 |
| +1 | ë³´í†µ - í‰ê·  ìˆ˜ì¤€ | +2 |
| -1 | ë¯¸í¡í•¨ - ê°œì„  í•„ìš” | -2 |
| -2 | ë¶€ì¡±í•¨ - ë¬¸ì œ ìˆìŒ | -4 |
| -3 | ë§¤ìš° ë¶€ì¡± - ì‹¬ê°í•œ ë¬¸ì œ | -6 |
| -4 | ê·¹íˆ ë¶€ì¡± - ì •ì¹˜ì¸ ë¶€ì í•© | -8 |

### 6.3 ìì—° ê°€ì¤‘ì¹˜

- 4ê°œ AIê°€ ë™ì¼ ë‰´ìŠ¤ ìˆ˜ì§‘ â†’ í’€ì— 4ë²ˆ í¬í•¨ â†’ 4ë°° ì˜í–¥
- ë³„ë„ ê°€ì¤‘ì¹˜ ê³„ì‚° ë¶ˆí•„ìš”
- ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ì˜ë¨

---

## 7. ë¹„ìš© ë¶„ì„

### ìˆ˜ì§‘ ë¹„ìš©

| AI | ì¹´í…Œê³ ë¦¬ë‹¹ | ì •ì¹˜ì¸ë‹¹ (10ê°œ) | 100ëª… |
|----|------------|----------------|-------|
| Gemini | $0 | $0 | **$0** |
| Naver | $0 | $0 | **$0** |
| **í•©ê³„** | **$0** | **$0** | **$0** |

### í‰ê°€ ë¹„ìš©

| AI | í•­ëª©ë‹¹ | ì •ì¹˜ì¸ë‹¹ (1,000ê°œ) | 100ëª… |
|----|--------|-------------------|-------|
| Claude | $0 | **$0** | **$0** (CLI Direct) |
| ChatGPT | TBD | TBD | TBD |
| Grok | TBD | TBD | TBD |
| Gemini | TBD | TBD | TBD |

### ì´ ë¹„ìš©

```
ìˆ˜ì§‘: $0/100ëª… (Gemini + Naver ëª¨ë‘ ë¬´ë£Œ)
í‰ê°€: $0/100ëª… (Claude CLI Direct)
ì´: $0/100ëª…

100% ë¬´ë£Œ âœ…
```

---

## 8. ì˜ˆìƒ ì‘ì—…ëŸ‰

### 1ëª… ì •ì¹˜ì¸ ê¸°ì¤€

```
ìˆ˜ì§‘:
- Gemini: 500ê°œ (10ê°œ ì¹´í…Œê³ ë¦¬ Ã— 50ê°œ)
- Naver: 500ê°œ (10ê°œ ì¹´í…Œê³ ë¦¬ Ã— 50ê°œ)
- ì´ 1,000ê°œ (ë²„í¼ 20% í¬í•¨ ìµœëŒ€ 1,200ê°œ)

í‰ê°€:
- Claude: 1,000ê°œ (CLI Direct, $0)
- ChatGPT: 1,000ê°œ
- Grok: 1,000ê°œ
- Gemini: 1,000ê°œ
- ì´ 4,000ê°œ í‰ê°€

ì ìˆ˜ ê³„ì‚°:
- 10ê°œ ì¹´í…Œê³ ë¦¬ ì ìˆ˜ ì‚°ì¶œ
- ìµœì¢… ì¢…í•© ì ìˆ˜ ì‚°ì¶œ
```

### 100ëª… ê¸°ì¤€

```
ìˆ˜ì§‘: 100,000ê°œ (10ë§Œê°œ, ë²„í¼ 20% í¬í•¨ ìµœëŒ€ 120,000ê°œ)
í‰ê°€: 400,000ê°œ (40ë§Œê°œ)
ë¹„ìš©: $0 (ì™„ì „ ë¬´ë£Œ)
```

---

## 9. ì£¼ì˜ì‚¬í•­

### 9.1 ìˆ˜ì§‘ ì‹œ

- âœ… ì‹¤ì œ URL í•„ìˆ˜ (example.com ê¸ˆì§€)
- âœ… OFFICIALì€ OFFICIAL ì†ŒìŠ¤ë§Œ
- âœ… PUBLICì€ PUBLIC ì†ŒìŠ¤ë§Œ
- âœ… ê·¸ ì™¸ ì†ŒìŠ¤ ì œí•œ ì¼ì²´ ì—†ìŒ
- âœ… OFFICIAL 10-10-80 / PUBLIC 20-20-60 ê· í˜• ìœ ì§€

### 9.2 í‰ê°€ ì‹œ

- âœ… Claude CLI Direct í™œìš© (API ë¹„ìš© $0)
- âœ… ìˆ˜ì§‘ ì‹œì  â‰  í‰ê°€ ì‹œì  (ì„¸ì…˜ ë¶„ë¦¬)
- âœ… 4ê°œ AI ëª¨ë‘ ì „ì²´ ë°ì´í„° í‰ê°€
- âœ… ë“±ê¸‰ ì²´ê³„ ì¤€ìˆ˜ (+4 ~ -4)

### 9.3 ë¹„ìš© ìµœì í™”

- âœ… Gemini ë¬´ë£Œ (Google Search)
- âœ… Naver ë¬´ë£Œ (Naver Search API)
- âœ… Claude CLI Direct ($0)
- âœ… ì™„ì „ ë¬´ë£Œ ì‹œìŠ¤í…œ

---

## 10. ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ê´€ê³„

```
politicians (ì •ì¹˜ì¸ ê¸°ë³¸ ì •ë³´)
    â†“ 1:N
collected_data_v40 (ìˆ˜ì§‘ ë°ì´í„°, rating ì—†ìŒ)
    â†“ 1:N (collected_data_idë¡œ ì—°ê²°)
evaluations_v40 (í‰ê°€ ê²°ê³¼, rating ìˆìŒ)

politicians
    â†“ 1:1
ai_final_scores_v40 (ìµœì¢… ì ìˆ˜, JSONB)
```

**í•µì‹¬:**
- `collected_data_v40.id` â†’ `evaluations_v40.collected_data_id` (FK)
- ìˆ˜ì§‘ ë°ì´í„° 1ê°œ â†’ 4ê°œ AI í‰ê°€ (4ê°œ ë ˆì½”ë“œ)
- ìˆ˜ì§‘ í…Œì´ë¸”: rating ì—†ìŒ (ìˆ˜ì§‘ë§Œ)
- í‰ê°€ í…Œì´ë¸”: rating ìˆìŒ (í‰ê°€ë§Œ)

---

## 11. ì°¸ê³  ë¬¸ì„œ

- `V40_ê¸°ë³¸ë°©ì¹¨.md` - í•µì‹¬ ì§€ì¹¨
- `V40_ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜_ê°€ì´ë“œ.md` - ìë™í™” ê°€ì´ë“œ
- `V40_ì™„ì „í•œ_í”„ë¡œì„¸ìŠ¤_í”Œë¡œìš°ì°¨íŠ¸.md` - ì „ì²´ í”„ë¡œì„¸ìŠ¤ ì‹œê°í™” â­
- `AI_ê¸°ë°˜_ì •ì¹˜ì¸_ìƒì„¸í‰ê°€ë³´ê³ ì„œ_ìƒì„±_ê°€ì´ë“œ_V40.md` - ë³´ê³ ì„œ ìƒì„±
- `Claude_CLI_Direct_í‰ê°€_ì ìš©ë°©ë²•.md` - í‰ê°€ ë°©ë²•

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-06
**ë²„ì „**: V40
