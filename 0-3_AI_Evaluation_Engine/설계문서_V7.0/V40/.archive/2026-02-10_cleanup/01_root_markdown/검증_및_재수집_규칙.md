# V40 검증 및 재수집 규칙

**작성일**: 2026-02-11
**목적**: 수집 목표 체계 및 재수집 규칙 명확화

---

## 핵심 규칙 (3줄 요약)

1. **초기 수집**: 120개/카테고리 (100 + 20% 버퍼)
2. **검증 기준**: 최소 목표 100개 달성 여부
3. **재수집 목표**: **100개까지만** (버퍼 제외!)

---

## 2단계 목표 체계

| 목표 유형 | 카테고리당 | 전체 (10개) | 적용 시점 |
|----------|-----------|------------|----------|
| **초기 목표** (버퍼 포함) | 120개 | 1,200개 | Stage 1: 수집 |
| **최소 목표** (필수) | 100개 | 1,000개 | Stage 2: 검증 & 재수집 |

---

## 상세 규칙

### 1. 초기 수집 (Stage 1)

**목표**: 120개/카테고리

**배분**:
- Gemini: 60개 (OFFICIAL 36 + PUBLIC 24)
- Naver: 60개 (OFFICIAL 12 + PUBLIC 48)

**버퍼 20% 포함 이유**:
- 검증 과정에서 무효 데이터 발생 예상
- URL 접속 불가, 중복, 기간 초과 등

### 2. 검증 (Stage 2-1)

**기준**: 최소 목표 100개 달성 여부

**검증 항목**:
- URL 실제 존재 여부
- 도메인 유효성 (OFFICIAL/PUBLIC)
- 필수 필드 (title, content, source_url)
- 기간 제한 (OFFICIAL 4년, PUBLIC 2년)
- 중복 데이터 제거

**결과 판정**:
```
카테고리별 체크:
├── 100개 이상 → ✅ 완료 (재수집 불필요)
└── 100개 미만 → ❌ 재수집 필요
```

### 3. 재수집 (Stage 2-2)

**목표**: **100개까지만** (버퍼 제외!)

**프로세스**:
1. 100개 미만 카테고리 식별
2. Gap 큰 순서대로 우선순위 정렬
3. 순차적 재수집 (Naver + Gemini)
4. 100개 달성 시 즉시 중단

**재수집 제한 이유**:
- 재수집은 부족분 보충 목적
- 과도한 재수집 방지 (시간/비용)
- 100개면 충분한 평가 데이터

---

## 예시

### 예시 1: 재수집 필요

```
카테고리: vision

초기 수집: 120개 목표
검증 후: 88개 남음 (32개 무효)

재수집 목표: 100개
재수집 필요: 12개 (100 - 88)

✅ 올바른 재수집: 12개 수집 → 100개 달성
❌ 잘못된 재수집: 32개 수집 → 120개 달성 (과도함!)
```

### 예시 2: 재수집 불필요

```
카테고리: expertise

초기 수집: 120개 목표
검증 후: 103개 남음 (17개 무효)

재수집 필요: 없음 (이미 100개 초과)

✅ 완료 (103 >= 100)
```

### 예시 3: 전체 프로세스

```
10개 카테고리 전체:

초기 수집: 1,200개 (120×10)
검증 후: 987개 남음 (213개 무효)

카테고리별 상태:
- expertise: 103/100 ✅ 완료
- ethics: 116/100 ✅ 완료
- responsiveness: 109/100 ✅ 완료
- publicinterest: 113/100 ✅ 완료
- accountability: 98/100 ❌ 재수집 필요 (+2)
- communication: 92/100 ❌ 재수집 필요 (+8)
- leadership: 91/100 ❌ 재수집 필요 (+9)
- integrity: 89/100 ❌ 재수집 필요 (+11)
- vision: 88/100 ❌ 재수집 필요 (+12)
- transparency: 88/100 ❌ 재수집 필요 (+12)

재수집 필요: 6개 카테고리, 총 54개
재수집 목표: 각 카테고리를 100개까지

최종 목표: 1,000개 (100×10)
```

---

## 사용 스크립트

### 통합 스크립트 (권장)

```bash
cd scripts/core

# 검증 + 재수집 자동 실행
python validate_and_recollect_v40.py \
  --politician_id=8c5dcc89 \
  --politician_name="박주민"

# 시뮬레이션만 (실제 수집 안 함)
python validate_and_recollect_v40.py \
  --politician_id=8c5dcc89 \
  --politician_name="박주민" \
  --dry-run
```

### 개별 스크립트 (참고용)

```bash
# 검증만 (플래깅만, 삭제 안 함)
python validate_v40_redesigned.py \
  --politician_id=8c5dcc89 \
  --politician_name="박주민"

# 재수집만
cd ../workflow
python recollect_simple_v40.py \
  --politician-id=8c5dcc89 \
  --politician-name="박주민"
```

---

## FAQ

### Q1: 왜 재수집은 100개까지만인가요?

**A**: 버퍼(20%)는 초기 수집의 안전장치입니다. 재수집은 검증 후 부족분을 보충하는 것이 목적이므로, 최소 목표(100개)만 달성하면 됩니다. 과도한 재수집은 시간과 비용 낭비입니다.

### Q2: 100개를 초과해도 괜찮나요?

**A**: 네, 괜찮습니다. 100개는 최소 목표이고, 검증 후 100개를 초과하는 카테고리는 재수집 없이 그대로 사용합니다.

### Q3: 버퍼를 초과하면 어떻게 되나요?

**A**: 초기 수집 시 120개를 초과하면 경고가 출력되지만, 프로세스는 계속 진행됩니다. 품질 좋은 데이터가 많다면 문제없습니다.

### Q4: 재수집 후에도 100개 미달이면?

**A**: 추가 재수집이 필요합니다. Gemini CLI를 수동으로 실행하여 부족분을 채웁니다. Naver API는 자동으로 재실행되지만, Gemini는 대화형이므로 수동 실행이 필요할 수 있습니다.

### Q5: 규칙을 어디서 확인하나요?

**A**:
- 이 문서: `검증_및_재수집_규칙.md`
- README.md: "검증 및 재수집 규칙" 섹션
- V40_기본방침.md: "수집 목표 체계" 섹션
- 통합 스크립트: `validate_and_recollect_v40.py` 헤더

---

## 참고 문서

- **README.md** - "검증 및 재수집 규칙" 섹션
- **V40_기본방침.md** - "수집 목표 체계" 섹션
- **scripts/core/validate_and_recollect_v40.py** - 통합 스크립트

---

**최종 업데이트**: 2026-02-11
