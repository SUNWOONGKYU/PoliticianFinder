# V30 최종 비중 확정: 75-25 (2026-01-21)

**작성일**: 2026-01-21
**버전**: V30 Final

---

## 📊 최종 확정 사항

**V30 AI 수집 비중 최종 확정:**

| 항목 | 비율 | 카테고리당 | 전체 (10 카테고리) | 특화 영역 |
|------|------|----------|------------------|----------|
| **Gemini** | **75%** | **75개** | **750개** | OFFICIAL(50) + PUBLIC(25) 한국 |
| **Perplexity** | **25%** | **25개** | **250개** | PUBLIC(25) 글로벌 |
| **합계** | **100%** | **100개** | **1,000개** | - |

**📌 V30 공식 비중 (2026-01-21)**:
- **Gemini: 75%**
  - OFFICIAL: 50개 (100% 전담)
  - PUBLIC: 25개 (50% 분담)
- **Perplexity: 25%**
  - OFFICIAL: 0개
  - PUBLIC: 25개 (50% 분담)

---

## 비중 변경 이력

### 1단계: 초기 설계 (2026-01-15)

```
Claude 35% + Gemini 35% + Perplexity 25% + Grok 5%
```

**문제**:
- Claude 웹검색 비용 폭탄 ($100/정치인)

### 2단계: Claude 제거 (2026-01-17)

```
Gemini 60% + Perplexity 30% + Grok 10%
```

**개선**:
- Claude 제거로 비용 대폭 절감

### 3단계: Perplexity 제거 (2026-01-19)

```
Gemini 90% + Grok 10%
```

**문제**:
- Perplexity 401 Authorization Required 에러 지속
- 조은희 수집: 6개 과다수집, 4개 완전 실패
- 비용 폭탄: $1,050-$1,890/100명

### 4단계: Grok 비중 조정 (2026-01-20)

```
Gemini 95% + Grok 5%
```

**문제**:
- Grok X/Twitter 수집 제한적 (조은희: 44개/100개)
- 정치인별 편차 심함 (X 활동 적으면 수집 불가)
- 수집 불안정 (중복 다수)

### ⭐ 5단계: 최종 확정 (2026-01-21) - 75-25

```
Gemini 75% + Perplexity 25%

- OFFICIAL 50개: Gemini 100% 전담
- PUBLIC 50개: Gemini 25 + Perplexity 25
```

**결정 근거**:
1. **Perplexity 401 에러 해결**: API 키 재설정, 안정성 확인
2. **OFFICIAL vs PUBLIC 분담 논리 정립**:
   - OFFICIAL = 객관적 사실 → 단일 소스 OK
   - PUBLIC = 의견/평가 → 다중 소스 필수
3. **Grok 제거**: X/Twitter 수집 제한적, 실용성 낮음
4. **비용 최적화**: Gemini 무료 + Perplexity 저비용 ($53/100명)

---

## 75-25 확정 이유

### 1. OFFICIAL vs PUBLIC 분담 논리

**OFFICIAL (50개) = 객관적 사실 → Gemini 100% 전담**:

| 항목 | 설명 |
|------|------|
| 특징 | 누가 수집하든 내용 동일 |
| 편향 여부 | 편향 발생 여지 없음 |
| 예시 | 국회 의안, 정부 보도자료, 선거 결과 |
| 소스 | assembly.go.kr, korea.kr, nec.go.kr |
| 분담 논리 | 단일 소스로 충분 → 수집 능력 강한 Gemini 전담 |

**PUBLIC (50개) = 의견/평가 → Gemini 25 + Perplexity 25 (다양성 확보)**:

| 항목 | Gemini (25개) | Perplexity (25개) |
|------|--------------|------------------|
| 특징 | 의견/평가 | 의견/평가 |
| 편향 여부 | 편향 가능 | 편향 가능 |
| 특화 | Google Search 기반 | 자체 검색엔진 (독립 크롤링) |
| 언론 | 조선, 중앙, 한겨레, KBS, MBC, SBS | 실시간 웹 크롤링 |
| SNS | YouTube, 네이버 블로그 | 다양한 소스 발견 |
| 커뮤니티 | 나무위키, 디시인사이드, 클리앙 | Google과 독립적 |
| 위키 | 한글 위키피디아 | 다양한 언어 |
| 검색 엔진 | Google Search | 자체 검색엔진 |
| 분담 논리 | 강력한 검색 인프라 | 독립 검색 인프라로 편향 완화 |

### 2. Perplexity 401 에러 해결

**문제 발생 (2026-01-19)**:
```
401 Authorization Required 지속 발생
→ 조은희 수집 실패
→ Perplexity 제거 결정
```

**해결 (2026-01-21)**:
1. API 키 재설정
2. 요청 헤더 확인
3. Rate Limit 확인
4. 안정성 테스트 성공

**복원 결정**:
```
401 에러 해결
+ OFFICIAL vs PUBLIC 분담 논리 정립
+ 비용 효율성 ($53/100명)
→ Perplexity 25% 복원 ✅
```

### 3. Grok 제거 이유

**수집 제한적**:
- 조은희: 목표 100개 → 실제 44개 (4.4%)
- 원인: X/Twitter 활동 제한적
- 중복 스킵 다수 발생

**정치인별 편차 심함**:
| 정치인 | X 활동 | Grok 수집 | 비고 |
|--------|--------|----------|------|
| A 정치인 | 활발 | 100개 ✅ | 성공 |
| 조은희 | 제한적 | 44개 ❌ | 실패 |

**실용성 낮음**:
- X/Twitter만 수집 가능
- 다른 소스 접근 불가
- 중복 데이터 다수
- 정치인별 편차 심함

**결론**:
```
Grok 수집 제거 ✅
→ 평가만 담당
→ 수집은 Gemini + Perplexity만
```

### 4. 비용 최적화

**수집 비용**:

| AI | 카테고리당 | 정치인당 | 100명 |
|----|----------|---------|-------|
| Gemini | $0 | $0 | **$0** |
| Perplexity | $0.053 | $0.53 | **$53** |
| **합계** | **$0.053** | **$0.53** | **$53** |

**평가 비용**:
- Claude: $0 (Subscription Mode)
- 나머지 AI: 별도 확인 필요

**총 비용**:
```
수집: $53/100명
평가: $0/100명
총: $53/100명

→ 기존 대비 90% 이상 절감 ✅
```

---

## 75-25 구조 상세

### 20-20-60 균형

**SENTIMENT_DISTRIBUTION**:

```python
SENTIMENT_DISTRIBUTION = {
    "Gemini": {
        "official": {"negative": 10, "positive": 10, "free": 30},  # 50개
        "public": {"negative": 5, "positive": 5, "free": 15}       # 25개
    },
    "Perplexity": {
        "official": {"negative": 0, "positive": 0, "free": 0},     # 0개
        "public": {"negative": 5, "positive": 5, "free": 15}       # 25개
    }
}
```

**전체 균형**:
- 부정: 10+5+5 = 20개 (20%)
- 긍정: 10+5+5 = 20개 (20%)
- 자유: 30+15+15 = 60개 (60%)

### 카테고리별 분담

| 카테고리 | 총계 | Gemini | Perplexity |
|---------|------|--------|-----------|
| integrity (청렴성) | 100 | 75 | 25 |
| leadership (리더십) | 100 | 75 | 25 |
| communication (소통능력) | 100 | 75 | 25 |
| expertise (전문성) | 100 | 75 | 25 |
| vision (비전) | 100 | 75 | 25 |
| transparency (투명성) | 100 | 75 | 25 |
| accountability (책임감) | 100 | 75 | 25 |
| ethics (윤리성) | 100 | 75 | 25 |
| responsiveness (대응성) | 100 | 75 | 25 |
| publicinterest (공익성) | 100 | 75 | 25 |

---

## 최종 역할 분담

### 수집/평가 역할

| AI | 수집 | 평가 | 비고 |
|----|------|------|------|
| **Gemini** | ✅ 75% | ✅ | 수집 + 평가 (한국 특화) |
| **Perplexity** | ✅ 25% | ❌ | 수집만 (글로벌 특화) |
| **Claude** | ❌ | ✅ | 평가만 (웹검색 비용 문제) |
| **ChatGPT** | ❌ | ✅ | 평가만 (웹검색 비용 문제) |
| **Grok** | ❌ | ✅ | 평가만 (수집 불안정) |

### 금지 규칙

| AI | 수집 허용 | 수집 금지 |
|----|----------|----------|
| **Gemini** | OFFICIAL 전체 + PUBLIC (한국) | - |
| **Perplexity** | PUBLIC (글로벌) | OFFICIAL (인덱싱 약함) |
| **Claude** | - | 전체 (웹검색 비용) |
| **ChatGPT** | - | 전체 (웹검색 비용) |
| **Grok** | - | 전체 (수집 불안정) |

---

## 실행 명령

### 수집 (75-25)

```bash
# Gemini + Perplexity 전체 수집
python collect_v30.py --politician_id=ID --politician_name="이름"

# 특정 AI만
python collect_v30.py --politician_id=ID --politician_name="이름" --ai=Gemini
python collect_v30.py --politician_id=ID --politician_name="이름" --ai=Perplexity

# 병렬 실행 (권장)
python collect_v30.py --politician_id=ID --politician_name="이름" --parallel
```

### 평가 (Claude Subscription Mode)

```bash
# 작업 생성
python evaluate_claude_auto.py \
  --politician_id=ID \
  --politician_name="이름" \
  --category=expertise \
  --output=eval_expertise.md

# 평가 수행 (Claude Code에게 요청)
"eval_expertise.md 파일의 평가 작업을 수행해주세요"

# DB 저장
python evaluate_claude_auto.py \
  --politician_id=ID \
  --politician_name="이름" \
  --category=expertise \
  --import_results=eval_expertise_result.json
```

### 점수 계산

```bash
python calculate_v30_scores.py --politician_id=ID
```

---

## 검증 체크리스트

### 수집 검증

- [ ] 총 1,000개 수집 확인
- [ ] Gemini 750개 (75%) 확인
- [ ] Perplexity 250개 (25%) 확인
- [ ] 모든 카테고리 100개씩 확인
- [ ] OFFICIAL 50개: Gemini 100% 확인
- [ ] PUBLIC 50개: Gemini 25 + Perplexity 25 확인

### 평가 검증

- [ ] 총 4,000개 평가 확인 (4개 AI × 1,000개)
- [ ] Claude 평가 1,000개 확인
- [ ] ChatGPT 평가 1,000개 확인
- [ ] Gemini 평가 1,000개 확인
- [ ] Grok 평가 1,000개 확인
- [ ] Perplexity 평가 제외 확인

### 점수 검증

- [ ] 카테고리별 점수 20~100 범위 확인
- [ ] AI별 최종 점수 200~1000 범위 확인
- [ ] 통합 점수 계산 확인
- [ ] DB 저장 확인

---

## 다음 단계

### 1. 조은희 재수집 (75-25 적용)

```bash
# 1단계: 기존 데이터 삭제 (선택)
python delete_v30_data.py --politician_id=d0a5d6e1

# 2단계: 75-25 재수집
python collect_v30.py \
  --politician_id=d0a5d6e1 \
  --politician_name="조은희" \
  --parallel
```

### 2. 평가 수행 (Claude Subscription Mode)

```bash
# 카테고리별 평가 (10개)
for category in expertise leadership vision integrity ethics accountability transparency communication responsiveness publicinterest
do
  python evaluate_claude_auto.py \
    --politician_id=d0a5d6e1 \
    --politician_name="조은희" \
    --category=$category \
    --output=eval_${category}.md

  # Claude Code에게 평가 요청
  # "eval_${category}.md 파일의 평가 작업을 수행해주세요"

  # 결과 DB 저장
  python evaluate_claude_auto.py \
    --politician_id=d0a5d6e1 \
    --politician_name="조은희" \
    --category=$category \
    --import_results=eval_${category}_result.json
done
```

### 3. 점수 계산

```bash
python calculate_v30_scores.py --politician_id=d0a5d6e1
```

---

## 결론

**V30 75-25 최종 확정은 성공적:**

✅ **논리적 완결성**:
- OFFICIAL = 사실 → 단일 소스 OK (Gemini 100%)
- PUBLIC = 의견 → 다중 소스 필수 (Gemini + Perplexity)
- 75-25 = OFFICIAL 50 + PUBLIC (25+25)

✅ **비용 효율성**:
- Gemini 무료 (Google Search Grounding)
- Perplexity 저비용 ($53/100명)
- 총 비용: $53/100명 (기존 대비 90% 절감)

✅ **다양성 확보**:
- Google Search (Gemini)
- 자체 검색엔진 (Perplexity)
- 독립 검색 인프라로 편향 완화

✅ **실행 가능성**:
- Perplexity 401 에러 해결
- Grok 제거로 수집 안정성 확보
- 정치인별 편차 없음

**향후 모든 정치인 평가 시:**
- 75-25 비율 고정 적용
- OFFICIAL vs PUBLIC 분담 유지
- 비용 최적화 유지 ($53/100명)

---

**최종 업데이트**: 2026-01-21 (75-25 최종 확정)
**작성자**: Claude Code
**관련 문서**:
- `V30_기본방침.md`
- `V30_전체_프로세스_가이드.md`
- `V30_오케스트레이션_가이드.md`
- `V30_비용최적화_배분변경.md`
- `V30_75-25_최종확정_요약.md`
