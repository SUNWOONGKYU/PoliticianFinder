# P2C1 - ì†Œì…œ ë¡œê·¸ì¸ (ë‹¤ì¤‘ í”Œë«í¼)

**Phase**: Phase 2 - ì •ì¹˜ì¸ ëª©ë¡/ìƒì„¸
**ì˜ì—­**: Authentication (Supabase Auth)
**ë‹´ë‹¹ AI**: fullstack-developer
**ìƒíƒœ**: ëŒ€ê¸°
**ì§„ë„**: 0%

---

## ğŸ“‹ ì‘ì—… ê°œìš”

ë‹¤ì¤‘ ì†Œì…œ ë¡œê·¸ì¸ì„ Supabase Authë¥¼ í†µí•´ êµ¬í˜„í•©ë‹ˆë‹¤. í•œêµ­ ì‚¬ìš©ìë¥¼ ìœ„í•œ ì¹´ì¹´ì˜¤, ë„¤ì´ë²„ì™€ ê¸€ë¡œë²Œ í”Œë«í¼ì¸ Google, í˜ì´ìŠ¤ë¶, X(íŠ¸ìœ„í„°)ë¥¼ ëª¨ë‘ ì§€ì›í•˜ì—¬ ì‚¬ìš©ìê°€ ì„ í˜¸í•˜ëŠ” í”Œë«í¼ìœ¼ë¡œ ê°„í¸í•˜ê²Œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

**ì§€ì› í”Œë«í¼**:
1. **Google** - ê¸€ë¡œë²Œ í‘œì¤€
2. **ì¹´ì¹´ì˜¤í†¡** - í•œêµ­ #1 ë©”ì‹ ì € (í•„ìˆ˜)
3. **ë„¤ì´ë²„** - í•œêµ­ #1 í¬í„¸ (í•„ìˆ˜)
4. **í˜ì´ìŠ¤ë¶** - ê¸€ë¡œë²Œ ì†Œì…œ ë„¤íŠ¸ì›Œí¬
5. **X (íŠ¸ìœ„í„°)** - ì‹¤ì‹œê°„ ì†Œì…œ ë¯¸ë””ì–´

---

## ğŸ¯ ì‘ì—… ëª©í‘œ

### Google ë¡œê·¸ì¸
- [ ] Google Cloud Consoleì—ì„œ OAuth í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
- [ ] Supabaseì—ì„œ Google Provider í™œì„±í™”
- [ ] Google ë¡œê·¸ì¸ ë²„íŠ¼ UI êµ¬í˜„

### ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ (í•„ìˆ˜)
- [ ] Kakao Developersì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡
- [ ] Supabaseì—ì„œ Kakao Provider í™œì„±í™”
- [ ] ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼ UI êµ¬í˜„

### ë„¤ì´ë²„ ë¡œê·¸ì¸ (í•„ìˆ˜)
- [ ] ë„¤ì´ë²„ ê°œë°œì ì„¼í„°ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡
- [ ] Supabaseì—ì„œ Naver Provider í™œì„±í™” (Custom OAuth)
- [ ] ë„¤ì´ë²„ ë¡œê·¸ì¸ ë²„íŠ¼ UI êµ¬í˜„

### í˜ì´ìŠ¤ë¶ ë¡œê·¸ì¸
- [ ] Meta for Developersì—ì„œ ì•± ë“±ë¡
- [ ] Supabaseì—ì„œ Facebook Provider í™œì„±í™”
- [ ] í˜ì´ìŠ¤ë¶ ë¡œê·¸ì¸ ë²„íŠ¼ UI êµ¬í˜„

### X (íŠ¸ìœ„í„°) ë¡œê·¸ì¸
- [ ] X Developer Portalì—ì„œ ì•± ë“±ë¡
- [ ] Supabaseì—ì„œ Twitter Provider í™œì„±í™”
- [ ] X ë¡œê·¸ì¸ ë²„íŠ¼ UI êµ¬í˜„

### ê³µí†µ ì‘ì—…
- [ ] OAuth í”Œë¡œìš° êµ¬í˜„ (5ê°œ í”Œë«í¼)
- [ ] ë¡œê·¸ì¸ ì„±ê³µ í›„ í”„ë¡œí•„ ìë™ ìƒì„±
- [ ] í†µí•© ì—ëŸ¬ í•¸ë“¤ë§
- [ ] ë¦¬ë””ë ‰ì…˜ ì²˜ë¦¬
- [ ] ë¡œê·¸ì¸ UI/UX ìµœì í™”

---

## ğŸ“ ê¸°ìˆ  ì‚¬ì–‘

### Frontend
- Framework: Next.js 14 App Router
- Auth: Supabase Auth (Multi-Provider)
- UI: shadcn/ui Button + Custom Provider Buttons
- Icons: lucide-react + Custom SVG

### Backend
- Platform: Supabase Auth
- OAuth Providers:
  - Google OAuth 2.0
  - Kakao OAuth 2.0
  - Naver OAuth 2.0
  - Facebook OAuth 2.0
  - X (Twitter) OAuth 2.0

### ì§€ì› í™˜ê²½
- Production: Vercel ë°°í¬ URL
- Development: localhost:3000
- Preview: Vercel Preview URL

---

## ğŸ”— ì˜ì¡´ ì‘ì—…

**ì„ í–‰ ì‘ì—…**: P1C1 (AuthContext)
**í›„ì† ì‘ì—…**: P3C1 (2FA ì¸ì¦ - Phase 3)

---

## âœ… ì™„ë£Œ ê¸°ì¤€

### í•„ìˆ˜ (P0)
1. âœ… Google OAuth í´ë¼ì´ì–¸íŠ¸ ìƒì„± ë° í™œì„±í™”
2. âœ… ì¹´ì¹´ì˜¤ OAuth ì•± ë“±ë¡ ë° í™œì„±í™” (í•œêµ­ í•„ìˆ˜)
3. âœ… ë„¤ì´ë²„ OAuth ì•± ë“±ë¡ ë° í™œì„±í™” (í•œêµ­ í•„ìˆ˜)
4. âœ… 5ê°œ í”Œë«í¼ ë¡œê·¸ì¸ ë²„íŠ¼ UI êµ¬í˜„
5. âœ… OAuth í”Œë¡œìš° ë™ì‘ í™•ì¸ (5ê°œ í”Œë«í¼)
6. âœ… í”„ë¡œí•„ ìë™ ìƒì„± í™•ì¸
7. âœ… í†µí•© ì—ëŸ¬ í•¸ë“¤ë§ êµ¬í˜„

### ì„ íƒ (P1)
8. â­• í˜ì´ìŠ¤ë¶ OAuth ì•± ë“±ë¡ ë° í™œì„±í™”
9. â­• X(íŠ¸ìœ„í„°) OAuth ì•± ë“±ë¡ ë° í™œì„±í™”
10. â­• ë¡œê·¸ì¸ UI/UX ìµœì í™”
11. â­• E2E í…ŒìŠ¤íŠ¸ ì‘ì„±

---

## ğŸ’» êµ¬í˜„ ìƒì„¸

### 1. Google Cloud Console ì„¤ì •

**Step 1: OAuth í´ë¼ì´ì–¸íŠ¸ ìƒì„±**

1. https://console.cloud.google.com ì ‘ì†
2. í”„ë¡œì íŠ¸ ìƒì„± ë˜ëŠ” ì„ íƒ
3. "API ë° ì„œë¹„ìŠ¤" > "ì‚¬ìš©ì ì¸ì¦ ì •ë³´"
4. "ì‚¬ìš©ì ì¸ì¦ ì •ë³´ ë§Œë“¤ê¸°" > "OAuth í´ë¼ì´ì–¸íŠ¸ ID"
5. ì• í”Œë¦¬ì¼€ì´ì…˜ ìœ í˜•: "ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜"
6. ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI ì¶”ê°€:
   - `https://[YOUR_SUPABASE_PROJECT_ID].supabase.co/auth/v1/callback`
   - ë¡œì»¬ ê°œë°œ: `http://localhost:54321/auth/v1/callback`

**Step 2: í´ë¼ì´ì–¸íŠ¸ ID ë° ë¹„ë°€ë²ˆí˜¸ ì €ì¥**

```env
# .env.local
NEXT_PUBLIC_GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
```

### 2. Supabase Google Provider í™œì„±í™”

**Supabase Dashboard:**

1. Authentication > Providers
2. Google í™œì„±í™”
3. Client ID ì…ë ¥
4. Client Secret ì…ë ¥
5. Authorized redirect URLs í™•ì¸
6. ì €ì¥

**ì‚¬ì´íŠ¸ URL ì„¤ì •:**

```
Authentication > URL Configuration
- Site URL: https://politician-finder.com (í”„ë¡œë•ì…˜)
- Redirect URLs: https://politician-finder.com/auth/callback
```

### 3. Google ë¡œê·¸ì¸ ë²„íŠ¼ UI

```typescript
// components/auth/GoogleLoginButton.tsx
'use client'

import { useState } from 'react'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'
import { Button } from '@/components/ui/button'
import { Chrome } from 'lucide-react'

export function GoogleLoginButton() {
  const [loading, setLoading] = useState(false)
  const supabase = createClientComponentClient()

  const handleGoogleLogin = async () => {
    try {
      setLoading(true)

      const { error } = await supabase.auth.signInWithOAuth({
        provider: 'google',
        options: {
          redirectTo: `${window.location.origin}/auth/callback`,
          queryParams: {
            access_type: 'offline',
            prompt: 'consent'
          }
        }
      })

      if (error) {
        console.error('Google login error:', error)
        throw error
      }
    } catch (error: any) {
      console.error('Login failed:', error)
      alert('Google ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.')
    } finally {
      setLoading(false)
    }
  }

  return (
    <Button
      onClick={handleGoogleLogin}
      disabled={loading}
      variant="outline"
      className="w-full"
    >
      <Chrome className="mr-2 h-4 w-4" />
      {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'Googleë¡œ ê³„ì†í•˜ê¸°'}
    </Button>
  )
}
```

### 3-2. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„¤ì • ë° êµ¬í˜„

**Step 1: Kakao Developers ì•± ë“±ë¡**

1. https://developers.kakao.com ì ‘ì†
2. "ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜" > "ì• í”Œë¦¬ì¼€ì´ì…˜ ì¶”ê°€í•˜ê¸°"
3. ì•± ì´ë¦„, ì‚¬ì—…ìëª… ì…ë ¥
4. "ì•± í‚¤" í™•ì¸ (REST API í‚¤, JavaScript í‚¤)
5. "í”Œë«í¼" ì„¤ì •:
   - Web í”Œë«í¼ ì¶”ê°€
   - ì‚¬ì´íŠ¸ ë„ë©”ì¸: `https://[YOUR_SUPABASE_PROJECT_ID].supabase.co`
6. "ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸" í™œì„±í™”
7. Redirect URI ì„¤ì •:
   - `https://[YOUR_SUPABASE_PROJECT_ID].supabase.co/auth/v1/callback`
8. ë™ì˜ í•­ëª© ì„¤ì •:
   - ë‹‰ë„¤ì„ (í•„ìˆ˜)
   - í”„ë¡œí•„ ì‚¬ì§„ (ì„ íƒ)
   - ì¹´ì¹´ì˜¤ê³„ì •(ì´ë©”ì¼) (í•„ìˆ˜)

**Step 2: Supabase Kakao Provider ì„¤ì •**

SupabaseëŠ” ê¸°ë³¸ Kakao Providerë¥¼ ì§€ì›í•˜ë¯€ë¡œ:

1. Authentication > Providers > Kakao
2. Enable Kakao
3. Client ID: Kakao REST API í‚¤
4. Client Secret: Kakao JavaScript í‚¤ (ë˜ëŠ” Admin í‚¤)
5. Callback URL í™•ì¸

**Step 3: ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼**

```typescript
// components/auth/KakaoLoginButton.tsx
'use client'

import { useState } from 'react'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'
import { Button } from '@/components/ui/button'

export function KakaoLoginButton() {
  const [loading, setLoading] = useState(false)
  const supabase = createClientComponentClient()

  const handleKakaoLogin = async () => {
    try {
      setLoading(true)

      const { error } = await supabase.auth.signInWithOAuth({
        provider: 'kakao',
        options: {
          redirectTo: `${window.location.origin}/auth/callback`
        }
      })

      if (error) throw error
    } catch (error: any) {
      console.error('Kakao login error:', error)
      alert('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
    } finally {
      setLoading(false)
    }
  }

  return (
    <Button
      onClick={handleKakaoLogin}
      disabled={loading}
      variant="outline"
      className="w-full bg-[#FEE500] hover:bg-[#FEE500]/90 text-[#000000] border-0"
    >
      <svg className="mr-2 h-5 w-5" viewBox="0 0 18 18">
        <path fill="currentColor" d="M9 0C4.03 0 0 3.37 0 7.5c0 2.74 1.82 5.14 4.58 6.43-.2.73-.68 2.52-.77 2.93-.11.5.18.49.38.36.15-.1 2.47-1.62 3.41-2.24.47.06.95.1 1.44.1 4.97 0 9-3.37 9-7.5S13.97 0 9 0z"/>
      </svg>
      {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'ì¹´ì¹´ì˜¤ë¡œ ê³„ì†í•˜ê¸°'}
    </Button>
  )
}
```

### 3-3. ë„¤ì´ë²„ ë¡œê·¸ì¸ ì„¤ì • ë° êµ¬í˜„

**Step 1: ë„¤ì´ë²„ ê°œë°œì ì„¼í„° ì•± ë“±ë¡**

1. https://developers.naver.com/apps ì ‘ì†
2. "ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡"
3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ë¦„ ì…ë ¥
4. ì‚¬ìš© API ì„ íƒ: "ë„¤ì´ë²„ ë¡œê·¸ì¸"
5. ì œê³µ ì •ë³´ ì„ íƒ:
   - ì´ë©”ì¼ ì£¼ì†Œ (í•„ìˆ˜)
   - ë‹‰ë„¤ì„ (í•„ìˆ˜)
   - í”„ë¡œí•„ ì‚¬ì§„ (ì„ íƒ)
6. ì„œë¹„ìŠ¤ í™˜ê²½ ì¶”ê°€:
   - PC ì›¹
   - ì„œë¹„ìŠ¤ URL: `https://politician-finder.vercel.app`
   - Callback URL: `https://[YOUR_SUPABASE_PROJECT_ID].supabase.co/auth/v1/callback`
7. Client ID, Client Secret í™•ì¸

**Step 2: Supabase Custom OAuth Provider ì„¤ì •**

SupabaseëŠ” ë„¤ì´ë²„ë¥¼ ê¸°ë³¸ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ Custom OAuth ì„¤ì •:

```sql
-- Supabase SQL Editorì—ì„œ ì‹¤í–‰
-- ë„¤ì´ë²„ OAuth ì„¤ì • ì¶”ê°€ (ì„ íƒì‚¬í•­, Auth UIì—ì„œ ì§ì ‘ ì„¤ì • ê°€ëŠ¥)
```

ë˜ëŠ” Supabase Dashboard:
1. Authentication > Providers
2. ìŠ¤í¬ë¡¤í•˜ì—¬ "Custom" OAuth provider ì°¾ê¸°
3. Naver ì„¤ì • ì¶”ê°€

**Step 3: ë„¤ì´ë²„ ë¡œê·¸ì¸ ë²„íŠ¼**

```typescript
// components/auth/NaverLoginButton.tsx
'use client'

import { useState } from 'react'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'
import { Button } from '@/components/ui/button'

export function NaverLoginButton() {
  const [loading, setLoading] = useState(false)
  const supabase = createClientComponentClient()

  const handleNaverLogin = async () => {
    try {
      setLoading(true)

      // Supabaseê°€ Naverë¥¼ ê¸°ë³¸ ì§€ì›í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ,
      // Custom OAuth ë˜ëŠ” ì§ì ‘ êµ¬í˜„ í•„ìš”
      const { error } = await supabase.auth.signInWithOAuth({
        provider: 'naver' as any,  // Custom provider
        options: {
          redirectTo: `${window.location.origin}/auth/callback`
        }
      })

      if (error) throw error
    } catch (error: any) {
      console.error('Naver login error:', error)
      alert('ë„¤ì´ë²„ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
    } finally {
      setLoading(false)
    }
  }

  return (
    <Button
      onClick={handleNaverLogin}
      disabled={loading}
      variant="outline"
      className="w-full bg-[#03C75A] hover:bg-[#03C75A]/90 text-white border-0"
    >
      <span className="mr-2 font-bold text-white">N</span>
      {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'ë„¤ì´ë²„ë¡œ ê³„ì†í•˜ê¸°'}
    </Button>
  )
}
```

### 3-4. í˜ì´ìŠ¤ë¶ ë¡œê·¸ì¸ ì„¤ì • ë° êµ¬í˜„

**Step 1: Meta for Developers ì•± ë“±ë¡**

1. https://developers.facebook.com ì ‘ì†
2. "ë‚´ ì•±" > "ì•± ë§Œë“¤ê¸°"
3. ì•± ìœ í˜•: "ì†Œë¹„ì" ì„ íƒ
4. ì•± ì´ë¦„ ì…ë ¥
5. "Facebook ë¡œê·¸ì¸" ì œí’ˆ ì¶”ê°€
6. ì„¤ì • > ê¸°ë³¸ ì„¤ì •:
   - ì•± ID í™•ì¸
   - ì•± ì‹œí¬ë¦¿ ì½”ë“œ í™•ì¸
7. Facebook ë¡œê·¸ì¸ > ì„¤ì •:
   - ìœ íš¨í•œ OAuth ë¦¬ë””ë ‰ì…˜ URI:
     `https://[YOUR_SUPABASE_PROJECT_ID].supabase.co/auth/v1/callback`

**Step 2: Supabase Facebook Provider ì„¤ì •**

1. Authentication > Providers > Facebook
2. Enable Facebook
3. Facebook Client ID: ì•± ID
4. Facebook Secret: ì•± ì‹œí¬ë¦¿ ì½”ë“œ

**Step 3: í˜ì´ìŠ¤ë¶ ë¡œê·¸ì¸ ë²„íŠ¼**

```typescript
// components/auth/FacebookLoginButton.tsx
'use client'

import { useState } from 'react'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'
import { Button } from '@/components/ui/button'
import { Facebook } from 'lucide-react'

export function FacebookLoginButton() {
  const [loading, setLoading] = useState(false)
  const supabase = createClientComponentClient()

  const handleFacebookLogin = async () => {
    try {
      setLoading(true)

      const { error } = await supabase.auth.signInWithOAuth({
        provider: 'facebook',
        options: {
          redirectTo: `${window.location.origin}/auth/callback`
        }
      })

      if (error) throw error
    } catch (error: any) {
      console.error('Facebook login error:', error)
      alert('í˜ì´ìŠ¤ë¶ ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
    } finally {
      setLoading(false)
    }
  }

  return (
    <Button
      onClick={handleFacebookLogin}
      disabled={loading}
      variant="outline"
      className="w-full bg-[#1877F2] hover:bg-[#1877F2]/90 text-white border-0"
    >
      <Facebook className="mr-2 h-4 w-4" />
      {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'Facebookìœ¼ë¡œ ê³„ì†í•˜ê¸°'}
    </Button>
  )
}
```

### 3-5. X (íŠ¸ìœ„í„°) ë¡œê·¸ì¸ ì„¤ì • ë° êµ¬í˜„

**Step 1: X Developer Portal ì•± ë“±ë¡**

1. https://developer.x.com/en/portal/dashboard ì ‘ì†
2. "Create Project" > "Create App"
3. App name ì…ë ¥
4. App permissions: "Read" ì„ íƒ
5. Type of App: "Web App"
6. Callback URLs:
   - `https://[YOUR_SUPABASE_PROJECT_ID].supabase.co/auth/v1/callback`
7. API Key, API Secret Key í™•ì¸
8. OAuth 2.0 í™œì„±í™”

**Step 2: Supabase Twitter Provider ì„¤ì •**

1. Authentication > Providers > Twitter
2. Enable Twitter
3. API Key: Client ID
4. API Secret Key: Client Secret

**Step 3: X ë¡œê·¸ì¸ ë²„íŠ¼**

```typescript
// components/auth/XLoginButton.tsx
'use client'

import { useState } from 'react'
import { createClientComponentClient } from '@supabase/auth-helpers-nextjs'
import { Button } from '@/components/ui/button'

export function XLoginButton() {
  const [loading, setLoading] = useState(false)
  const supabase = createClientComponentClient()

  const handleXLogin = async () => {
    try {
      setLoading(true)

      const { error } = await supabase.auth.signInWithOAuth({
        provider: 'twitter',
        options: {
          redirectTo: `${window.location.origin}/auth/callback`
        }
      })

      if (error) throw error
    } catch (error: any) {
      console.error('X login error:', error)
      alert('X ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.')
    } finally {
      setLoading(false)
    }
  }

  return (
    <Button
      onClick={handleXLogin}
      disabled={loading}
      variant="outline"
      className="w-full bg-[#000000] hover:bg-[#000000]/90 text-white border-0"
    >
      <svg className="mr-2 h-4 w-4" fill="currentColor" viewBox="0 0 24 24">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
      </svg>
      {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'Xë¡œ ê³„ì†í•˜ê¸°'}
    </Button>
  )
}
```

### 4. í†µí•© ë¡œê·¸ì¸ í˜ì´ì§€

```typescript
// app/login/page.tsx
import { GoogleLoginButton } from '@/components/auth/GoogleLoginButton'
import { KakaoLoginButton } from '@/components/auth/KakaoLoginButton'
import { NaverLoginButton } from '@/components/auth/NaverLoginButton'
import { FacebookLoginButton } from '@/components/auth/FacebookLoginButton'
import { XLoginButton } from '@/components/auth/XLoginButton'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import { Separator } from '@/components/ui/separator'

export default function LoginPage() {
  return (
    <div className="flex min-h-screen items-center justify-center p-4">
      <Card className="w-full max-w-md">
        <CardHeader className="text-center">
          <CardTitle className="text-2xl">ë¡œê·¸ì¸</CardTitle>
          <CardDescription>
            ì •ì¹˜ì¸ í‰ê°€ í”Œë«í¼ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-3">
          {/* í•œêµ­ í•„ìˆ˜ í”Œë«í¼ */}
          <div className="space-y-2">
            <p className="text-xs text-muted-foreground text-center mb-2">
              í•œêµ­ ì‚¬ìš©ì ì¶”ì²œ
            </p>
            <KakaoLoginButton />
            <NaverLoginButton />
          </div>

          <Separator className="my-4" />

          {/* ê¸€ë¡œë²Œ í”Œë«í¼ */}
          <div className="space-y-2">
            <p className="text-xs text-muted-foreground text-center mb-2">
              ê¸°íƒ€ ë¡œê·¸ì¸ ë°©ë²•
            </p>
            <GoogleLoginButton />
            <FacebookLoginButton />
            <XLoginButton />
          </div>

          <div className="relative my-6">
            <div className="absolute inset-0 flex items-center">
              <span className="w-full border-t" />
            </div>
            <div className="relative flex justify-center text-xs uppercase">
              <span className="bg-background px-2 text-muted-foreground">
                ë˜ëŠ”
              </span>
            </div>
          </div>

          {/* ì´ë©”ì¼ ë¡œê·¸ì¸ (P1C2ì—ì„œ êµ¬í˜„ë¨) */}
          <p className="text-xs text-center text-muted-foreground">
            ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸í•˜ì‹œë ¤ë©´{' '}
            <a href="/login/email" className="underline">
              ì—¬ê¸°ë¥¼ í´ë¦­
            </a>
            í•˜ì„¸ìš”
          </p>
        </CardContent>
      </Card>
    </div>
  )
}
```

### 5. OAuth ì½œë°± ì²˜ë¦¬

```typescript
// app/auth/callback/route.ts
import { createRouteHandlerClient } from '@supabase/auth-helpers-nextjs'
import { cookies } from 'next/headers'
import { NextRequest, NextResponse } from 'next/server'

export async function GET(request: NextRequest) {
  try {
    const requestUrl = new URL(request.url)
    const code = requestUrl.searchParams.get('code')

    if (code) {
      const supabase = createRouteHandlerClient({ cookies })

      // OAuth ì½”ë“œë¥¼ ì„¸ì…˜ìœ¼ë¡œ êµí™˜
      await supabase.auth.exchangeCodeForSession(code)

      // ì‚¬ìš©ì ì •ë³´ ê°€ì ¸ì˜¤ê¸°
      const { data: { user } } = await supabase.auth.getUser()

      if (user) {
        // í”„ë¡œí•„ ìë™ ìƒì„± (ì—†ëŠ” ê²½ìš°)
        await createProfileIfNotExists(supabase, user)
      }
    }

    // í™ˆìœ¼ë¡œ ë¦¬ë””ë ‰ì…˜
    return NextResponse.redirect(new URL('/', request.url))
  } catch (error) {
    console.error('OAuth callback error:', error)
    return NextResponse.redirect(new URL('/login?error=auth_failed', request.url))
  }
}

async function createProfileIfNotExists(supabase: any, user: any) {
  // ê¸°ì¡´ í”„ë¡œí•„ í™•ì¸
  const { data: existingProfile } = await supabase
    .from('profiles')
    .select('id')
    .eq('id', user.id)
    .single()

  if (!existingProfile) {
    // í”„ë¡œí•„ ìƒì„±
    await supabase
      .from('profiles')
      .insert({
        id: user.id,
        email: user.email,
        username: user.user_metadata?.full_name || user.email?.split('@')[0],
        avatar_url: user.user_metadata?.avatar_url || null
      })
  }
}
```

### 6. ì—ëŸ¬ í•¸ë“¤ë§

```typescript
// app/login/page.tsxì— ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
'use client'

import { useSearchParams } from 'next/navigation'
import { Alert, AlertDescription } from '@/components/ui/alert'

export default function LoginPage() {
  const searchParams = useSearchParams()
  const error = searchParams.get('error')

  return (
    <div className="flex min-h-screen items-center justify-center">
      <Card className="w-full max-w-md">
        <CardHeader>
          <CardTitle>ë¡œê·¸ì¸</CardTitle>
        </CardHeader>
        <CardContent className="space-y-4">
          {error === 'auth_failed' && (
            <Alert variant="destructive">
              <AlertDescription>
                ë¡œê·¸ì¸ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.
              </AlertDescription>
            </Alert>
          )}

          <GoogleLoginButton />
        </CardContent>
      </Card>
    </div>
  )
}
```

### 7. ë¡œê·¸ì¸ ìƒíƒœ í‘œì‹œ

```typescript
// components/auth/UserMenu.tsx
'use client'

import { useAuth } from '@/contexts/AuthContext'
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger
} from '@/components/ui/dropdown-menu'
import { LogOut, User } from 'lucide-react'
import { useRouter } from 'next/navigation'

export function UserMenu() {
  const { user, profile, signOut } = useAuth()
  const router = useRouter()

  if (!user) return null

  const handleSignOut = async () => {
    await signOut()
    router.push('/')
  }

  return (
    <DropdownMenu>
      <DropdownMenuTrigger asChild>
        <button className="flex items-center gap-2">
          <Avatar>
            <AvatarImage src={profile?.avatar_url || undefined} />
            <AvatarFallback>
              {profile?.username?.[0]?.toUpperCase() || 'U'}
            </AvatarFallback>
          </Avatar>
        </button>
      </DropdownMenuTrigger>
      <DropdownMenuContent align="end">
        <DropdownMenuLabel>
          {profile?.username || user.email}
        </DropdownMenuLabel>
        <DropdownMenuSeparator />
        <DropdownMenuItem onClick={() => router.push('/profile')}>
          <User className="mr-2 h-4 w-4" />
          í”„ë¡œí•„
        </DropdownMenuItem>
        <DropdownMenuItem onClick={handleSignOut}>
          <LogOut className="mr-2 h-4 w-4" />
          ë¡œê·¸ì•„ì›ƒ
        </DropdownMenuItem>
      </DropdownMenuContent>
    </DropdownMenu>
  )
}
```

---

## ğŸ“ í…ŒìŠ¤íŠ¸ ê³„íš

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] Google ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­ ì‹œ Google OAuth í˜ì´ì§€ë¡œ ì´ë™
- [ ] Google ê³„ì • ì„ íƒ ë° ê¶Œí•œ ìŠ¹ì¸
- [ ] ë¡œê·¸ì¸ ì„±ê³µ í›„ í™ˆìœ¼ë¡œ ë¦¬ë””ë ‰ì…˜
- [ ] í”„ë¡œí•„ ìë™ ìƒì„± í™•ì¸
- [ ] ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥ ë™ì‘ í™•ì¸

### ì—ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤
- [ ] OAuth ì·¨ì†Œ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ ë³µê·€
- [ ] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì‹œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- [ ] ì˜ëª»ëœ ë¦¬ë””ë ‰ì…˜ URI ì²˜ë¦¬

### ë³´ì•ˆ í…ŒìŠ¤íŠ¸
- [ ] PKCE í”Œë¡œìš° ì‚¬ìš© í™•ì¸
- [ ] CSRF í† í° ê²€ì¦
- [ ] State íŒŒë¼ë¯¸í„° ê²€ì¦

---

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### OAuth 2.0 ë³´ì•ˆ

1. **PKCE (Proof Key for Code Exchange)**
   - Supabase Authê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬
   - Authorization Code Interception ê³µê²© ë°©ì–´

2. **State Parameter**
   - CSRF ê³µê²© ë°©ì–´
   - Supabaseê°€ ìë™ìœ¼ë¡œ ìƒì„± ë° ê²€ì¦

3. **Redirect URI ê²€ì¦**
   - Google Cloud Consoleì— ë“±ë¡ëœ URIë§Œ í—ˆìš©
   - ì™€ì¼ë“œì¹´ë“œ ì‚¬ìš© ê¸ˆì§€

### í´ë¼ì´ì–¸íŠ¸ ì‹œí¬ë¦¿ ë³´í˜¸

- Client Secretì€ ì„œë²„ í™˜ê²½ë³€ìˆ˜ì—ë§Œ ì €ì¥
- í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œì— ë…¸ì¶œ ê¸ˆì§€
- .env íŒŒì¼ì€ .gitignoreì— ì¶”ê°€

### ì„¸ì…˜ ê´€ë¦¬

```typescript
// SupabaseëŠ” ìë™ìœ¼ë¡œ JWT í† í° ê´€ë¦¬
// Access Token: 1ì‹œê°„ (ìë™ ê°±ì‹ )
// Refresh Token: 30ì¼
```

---

## ğŸ“Œ ì°¸ê³ ì‚¬í•­

**ì‘ì—… ì™„ë£Œ ì¼ì‹œ**: ëŒ€ê¸°ì¤‘
**í…ŒìŠ¤íŠ¸/ê²€í†  ê²°ê³¼**: ëŒ€ê¸°
**ìë™í™” ë°©ì‹**: AI-only
**ë¸”ë¡œì»¤**: ì—†ìŒ

**ë¹„ê³ **:
- **í•„ìˆ˜ í”Œë«í¼**: ì¹´ì¹´ì˜¤, ë„¤ì´ë²„ (í•œêµ­ ì‚¬ìš©ì 80%+ ì»¤ë²„ë¦¬ì§€)
- **ì¶”ì²œ í”Œë«í¼**: Google, í˜ì´ìŠ¤ë¶, X (ê¸€ë¡œë²Œ ì‚¬ìš©ì ëŒ€ì‘)
- ê° í”Œë«í¼ë³„ ì•± ë“±ë¡ ë° ì‹¬ì‚¬ ì†Œìš” ì‹œê°„:
  - Google: ì¦‰ì‹œ (ì‹¬ì‚¬ ë¶ˆí•„ìš”)
  - ì¹´ì¹´ì˜¤: 1-2ì¼ (ë¹„ì¦ˆì•± ì „í™˜ í•„ìš” ì‹œ)
  - ë„¤ì´ë²„: 1-3ì¼ (ê²€ìˆ˜ í•„ìš”)
  - í˜ì´ìŠ¤ë¶: ì¦‰ì‹œ (ê°œë°œ ëª¨ë“œ), ì‹¬ì‚¬ í•„ìš” (í”„ë¡œë•ì…˜)
  - X: ì¦‰ì‹œ (Basic ê³„ì •), ìŠ¹ì¸ í•„ìš” (Elevated)
- Supabase AuthëŠ” 20+ OAuth Provider ê¸°ë³¸ ì§€ì›
- í”„ë¡œë•ì…˜ ë°°í¬ ì „ ê° í”Œë«í¼ë³„ OAuth ë™ì˜ í™”ë©´ ì„¤ì • í•„ìˆ˜
- í•œêµ­ ì„œë¹„ìŠ¤ íŠ¹ì„±ìƒ ì¹´ì¹´ì˜¤/ë„¤ì´ë²„ëŠ” ë°˜ë“œì‹œ êµ¬í˜„ ê¶Œì¥

---

**ì‘ì„± ë°©ë²•ë¡ **: 13DGC-AODM v1.1
**AI-Only ì›ì¹™ ì¤€ìˆ˜**: âœ…
